webpackJsonp([112],{1953:function(n,l,t){"use strict";function u(n){return I._57(0,[(n()(),I._31(0,0,null,null,3,"core-empty-box",[["icon","paper"]],null,null,null,Q.b,Q.a)),I._30(1,49152,null,0,X.a,[],{message:[0,"message"],icon:[1,"icon"]},null),I._47(131072,Y.a,[Z.a,I.j]),(n()(),I._55(-1,0,["\n            "]))],function(n,l){n(l,1,0,I._56(l,1,0,I._44(l,2).transform("addon.mod_assign.submissionstatus_")),"paper")},null)}function i(n){return I._57(0,[(n()(),I._31(0,0,null,null,3,"ion-label",[["id","addon-assign-groupslabel"]],null,null,null,null,null)),I._30(1,16384,[[3,4]],0,nn.a,[ln.a,I.t,I.V,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(n()(),I._55(2,null,["",""])),I._47(131072,Y.a,[Z.a,I.j])],function(n,l){n(l,1,0,"addon-assign-groupslabel")},function(n,l){n(l,2,0,I._56(l,2,0,I._44(l,3).transform("core.groupsseparate")))})}function a(n){return I._57(0,[(n()(),I._31(0,0,null,null,3,"ion-label",[["id","addon-assign-groupslabel"]],null,null,null,null,null)),I._30(1,16384,[[3,4]],0,nn.a,[ln.a,I.t,I.V,[8,null],[8,null],[8,null],[8,null]],{id:[0,"id"]},null),(n()(),I._55(2,null,["",""])),I._47(131072,Y.a,[Z.a,I.j])],function(n,l){n(l,1,0,"addon-assign-groupslabel")},function(n,l){n(l,2,0,I._56(l,2,0,I._44(l,3).transform("core.groupsvisible")))})}function e(n){return I._57(0,[(n()(),I._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),I._30(1,16384,[[6,4]],0,tn.a,[I.t],{value:[0,"value"]},null),(n()(),I._55(2,null,["",""]))],function(n,l){n(l,1,0,l.context.$implicit.id)},function(n,l){n(l,2,0,l.context.$implicit.name)})}function s(n){return I._57(0,[(n()(),I._31(0,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,un.b,un.a)),I._30(1,1097728,null,3,an.a,[en.a,ln.a,I.t,I.V,[2,sn.a]],null,null),I._52(603979776,3,{contentLabel:0}),I._52(603979776,4,{_buttons:1}),I._52(603979776,5,{_icons:1}),I._30(5,16384,null,0,on.a,[],null,null),(n()(),I._55(-1,2,["\n                    "])),(n()(),I._26(16777216,null,1,1,null,i)),I._30(8,16384,null,0,rn.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(n()(),I._55(-1,2,["\n                    "])),(n()(),I._26(16777216,null,1,1,null,a)),I._30(11,16384,null,0,rn.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(n()(),I._55(-1,2,["\n                    "])),(n()(),I._31(13,0,null,3,10,"ion-select",[["aria-labelledby","addon-assign-groupslabel"],["interface","action-sheet"]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionChange"],[null,"click"],[null,"keyup.space"]],function(n,l,t){var u=!0,i=n.component;if("click"===l){u=!1!==I._44(n,14)._click(t)&&u}if("keyup.space"===l){u=!1!==I._44(n,14)._keyup()&&u}if("ngModelChange"===l){u=!1!==(i.groupId=t)&&u}if("ionChange"===l){u=!1!==i.setGroup(i.groupId)&&u}return u},_n.b,_n.a)),I._30(14,1228800,null,1,dn.a,[cn.a,en.a,ln.a,I.t,I.V,[2,an.a],gn.a],{interface:[0,"interface"]},{ionChange:"ionChange"}),I._52(603979776,6,{options:1}),I._50(1024,null,fn.l,function(n){return[n]},[dn.a]),I._30(17,671744,null,0,fn.q,[[8,null],[8,null],[8,null],[2,fn.l]],{model:[0,"model"]},{update:"ngModelChange"}),I._50(2048,null,fn.m,null,[fn.q]),I._30(19,16384,null,0,fn.n,[fn.m],null,null),(n()(),I._55(-1,null,["\n                        "])),(n()(),I._26(16777216,null,null,1,null,e)),I._30(22,802816,null,0,rn.j,[I._11,I._6,I.E],{ngForOf:[0,"ngForOf"]},null),(n()(),I._55(-1,null,["\n                    "])),(n()(),I._55(-1,2,["\n                "]))],function(n,l){var t=l.component;n(l,8,0,t.groupInfo.separateGroups);n(l,11,0,t.groupInfo.visibleGroups);n(l,14,0,"action-sheet");n(l,17,0,t.groupId);n(l,22,0,t.groupInfo.groups)},function(n,l){n(l,13,0,I._44(l,14)._disabled,I._44(l,19).ngClassUntouched,I._44(l,19).ngClassTouched,I._44(l,19).ngClassPristine,I._44(l,19).ngClassDirty,I._44(l,19).ngClassValid,I._44(l,19).ngClassInvalid,I._44(l,19).ngClassPending)})}function o(n){return I._57(0,[(n()(),I._31(0,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),I._55(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.context.$implicit.userfullname)})}function r(n){return I._57(0,[(n()(),I._31(0,0,null,null,2,"h2",[],null,null,null,null,null)),(n()(),I._55(1,null,["","",""])),I._47(131072,Y.a,[Z.a,I.j])],null,function(n,l){n(l,1,0,I._56(l,1,0,I._44(l,2).transform("addon.mod_assign.hiddenuser")),l.parent.context.$implicit.blindid)})}function _(n){return I._57(0,[(n()(),I._31(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),I._55(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.parent.context.$implicit.groupname)})}function d(n){return I._57(0,[(n()(),I._31(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),I._55(1,null,["",""])),I._47(131072,Y.a,[Z.a,I.j])],null,function(n,l){n(l,1,0,I._56(l,1,0,I._44(l,2).transform("addon.mod_assign.noteam")))})}function c(n){return I._57(0,[(n()(),I._31(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),I._55(1,null,["",""])),I._47(131072,Y.a,[Z.a,I.j])],null,function(n,l){n(l,1,0,I._56(l,1,0,I._44(l,2).transform("addon.mod_assign.multipleteams")))})}function g(n){return I._57(0,[(n()(),I._31(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),I._55(1,null,["",""])),I._47(131072,Y.a,[Z.a,I.j])],null,function(n,l){n(l,1,0,I._56(l,1,0,I._44(l,2).transform("addon.mod_assign.defaultteam")))})}function f(n){return I._57(0,[(n()(),I._31(0,0,null,null,13,"p",[],null,null,null,null,null)),(n()(),I._55(-1,null,["\n                            "])),(n()(),I._26(16777216,null,null,1,null,_)),I._30(3,16384,null,0,rn.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(n()(),I._55(-1,null,["\n                            "])),(n()(),I._26(16777216,null,null,1,null,d)),I._30(6,16384,null,0,rn.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(n()(),I._55(-1,null,["\n                            "])),(n()(),I._26(16777216,null,null,1,null,c)),I._30(9,16384,null,0,rn.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(n()(),I._55(-1,null,["\n                            "])),(n()(),I._26(16777216,null,null,1,null,g)),I._30(12,16384,null,0,rn.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(n()(),I._55(-1,null,["\n                        "]))],function(n,l){var t=l.component;n(l,3,0,l.parent.context.$implicit.groupname);n(l,6,0,t.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname&&!l.parent.context.$implicit.manyGroups&&!l.parent.context.$implicit.blindid);n(l,9,0,t.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname&&l.parent.context.$implicit.manyGroups&&!l.parent.context.$implicit.blindid);n(l,12,0,!t.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname)},null)}function p(n){return I._57(0,[(n()(),I._31(0,0,null,null,2,"ion-badge",[["text-center",""],["text-wrap",""]],null,null,null,null,null)),I._30(1,16384,null,0,pn.a,[ln.a,I.t,I.V],{color:[0,"color"]},null),(n()(),I._55(2,null,["\n                            ","\n                        "]))],function(n,l){n(l,1,0,l.parent.context.$implicit.statusColor)},function(n,l){n(l,2,0,l.parent.context.$implicit.statusTranslated)})}function m(n){return I._57(0,[(n()(),I._31(0,0,null,null,3,"ion-badge",[["text-center",""],["text-wrap",""]],null,null,null,null,null)),I._30(1,16384,null,0,pn.a,[ln.a,I.t,I.V],{color:[0,"color"]},null),(n()(),I._55(2,null,["\n                            ","\n                        "])),I._47(131072,Y.a,[Z.a,I.j])],function(n,l){n(l,1,0,l.parent.context.$implicit.gradingColor)},function(n,l){n(l,2,0,I._56(l,2,0,I._44(l,3).transform(l.parent.context.$implicit.gradingStatusTranslationId)))})}function h(n){return I._57(0,[(n()(),I._31(0,0,null,null,28,null,null,null,null,null,null,null)),(n()(),I._55(-1,null,["\n                    "])),(n()(),I._31(2,0,null,null,25,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[2,"core-split-item-selected",null]],[[null,"click"]],function(n,l,t){var u=!0;if("click"===l){u=!1!==n.component.loadSubmission(n.context.$implicit)&&u}return u},un.b,un.a)),I._30(3,1097728,null,3,an.a,[en.a,ln.a,I.t,I.V,[2,sn.a]],null,null),I._52(335544320,7,{contentLabel:0}),I._52(603979776,8,{_buttons:1}),I._52(603979776,9,{_icons:1}),I._30(7,16384,null,0,on.a,[],null,null),(n()(),I._55(-1,2,["\n                        "])),(n()(),I._31(9,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,mn.b,mn.a)),I._30(10,770048,null,0,hn.a,[bn.a,C.a,vn.a,In.a,k.a],{user:[0,"user"],linkProfile:[1,"linkProfile"]},null),I._30(11,16384,null,0,Pn.a,[],null,null),(n()(),I._55(-1,2,["\n                        "])),(n()(),I._26(16777216,null,2,1,null,o)),I._30(14,16384,null,0,rn.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(n()(),I._55(-1,2,["\n                        "])),(n()(),I._26(16777216,null,2,1,null,r)),I._30(17,16384,null,0,rn.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(n()(),I._55(-1,2,["\n                        "])),(n()(),I._26(16777216,null,2,1,null,f)),I._30(20,16384,null,0,rn.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(n()(),I._55(-1,2,["\n                        "])),(n()(),I._26(16777216,null,2,1,null,p)),I._30(23,16384,null,0,rn.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(n()(),I._55(-1,2,["\n                        "])),(n()(),I._26(16777216,null,2,1,null,m)),I._30(26,16384,null,0,rn.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(n()(),I._55(-1,2,["\n                    "])),(n()(),I._55(-1,null,["\n                "]))],function(n,l){var t=l.component;n(l,10,0,l.context.$implicit,!1);n(l,14,0,l.context.$implicit.userfullname);n(l,17,0,!l.context.$implicit.userfullname);n(l,20,0,t.assign.teamsubmission);n(l,23,0,l.context.$implicit.statusTranslated);n(l,26,0,l.context.$implicit.gradingStatusTranslationId)},function(n,l){n(l,2,0,l.context.$implicit.submitid==l.component.selectedSubmissionId)})}function b(n){return I._57(0,[(n()(),I._31(0,0,null,null,10,"ion-item",[["class","core-warning-card item item-block"],["icon-start",""],["text-wrap",""]],null,null,null,un.b,un.a)),I._30(1,1097728,null,3,an.a,[en.a,ln.a,I.t,I.V,[2,sn.a]],null,null),I._52(335544320,10,{contentLabel:0}),I._52(603979776,11,{_buttons:1}),I._52(603979776,12,{_icons:1}),I._30(5,16384,null,0,on.a,[],null,null),(n()(),I._55(-1,2,["\n                    "])),(n()(),I._31(7,0,null,2,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),I._30(8,147456,[[12,4]],0,xn.a,[ln.a,I.t,I.V],{name:[0,"name"]},null),(n()(),I._55(9,2,["\n                    ","\n                "])),I._47(131072,Y.a,[Z.a,I.j])],function(n,l){n(l,8,0,"warning")},function(n,l){n(l,7,0,I._44(l,8)._hidden);n(l,9,0,I._56(l,9,0,I._44(l,10).transform("addon.mod_assign.notallparticipantsareshown")))})}function v(n){return I._57(0,[I._52(402653184,1,{splitviewCtrl:0}),(n()(),I._31(1,0,null,null,16,"ion-header",[],null,null,null,null,null)),I._30(2,16384,null,0,yn.a,[ln.a,I.t,I.V,[2,Sn.a]],null,null),(n()(),I._55(-1,null,["\n    "])),(n()(),I._31(4,0,null,null,12,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,kn.b,kn.a)),I._30(5,49152,null,0,Cn.a,[cn.a,[2,Sn.a],[2,bn.a],ln.a,I.t,I.V],null,null),I._30(6,212992,null,0,An.a,[Cn.a,On.a,Z.a,k.a],null,null),(n()(),I._55(-1,3,["\n        "])),(n()(),I._31(8,0,null,3,3,"ion-title",[],null,null,null,wn.b,wn.a)),I._30(9,49152,null,0,Dn.a,[ln.a,I.t,I.V,[2,Gn.a],[2,Cn.a]],null,null),(n()(),I._31(10,0,null,0,1,"core-format-text",[],null,null,null,null,null)),I._30(11,540672,null,0,jn.a,[I.t,C.a,A.a,$n.a,Z.a,On.a,vn.a,Rn.a,Tn.a,Vn.a,In.a,En.a,[2,bn.a],[2,Mn.a],[2,j.a],Un.a,k.a],{text:[0,"text"]},null),(n()(),I._55(-1,3,["\n\n        "])),(n()(),I._31(13,0,null,2,2,"ion-buttons",[["end",""]],null,null,null,null,null)),I._30(14,16384,null,1,Ln.a,[ln.a,I.t,I.V,[2,Gn.a],[2,Cn.a]],null,null),I._52(603979776,2,{_buttons:1}),(n()(),I._55(-1,3,["\n    "])),(n()(),I._55(-1,null,["\n"])),(n()(),I._55(-1,null,["\n"])),(n()(),I._31(19,0,null,null,35,"core-split-view",[],null,null,null,Nn.b,Nn.a)),I._30(20,245760,[[1,4]],0,j.a,[[2,bn.a],I.t,Fn.a,On.a,Z.a],null,null),(n()(),I._55(-1,0,["\n    "])),(n()(),I._31(22,0,null,0,31,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Bn.b,Bn.a)),I._30(23,4374528,null,0,Mn.a,[ln.a,On.a,qn.a,I.t,I.V,cn.a,Hn.a,I.M,[2,Sn.a],[2,bn.a]],null,null),(n()(),I._55(-1,1,["\n        "])),(n()(),I._31(25,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,t){var u=!0;if("ionRefresh"===l){u=!1!==n.component.refreshList(t)&&u}return u},null,null)),I._30(26,212992,null,0,Jn.a,[On.a,Mn.a,I.M,Kn.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),I._55(-1,null,["\n            "])),(n()(),I._31(28,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Wn.b,Wn.a)),I._30(29,114688,null,0,zn.a,[Jn.a,ln.a],{pullingText:[0,"pullingText"]},null),I._47(131072,Y.a,[Z.a,I.j]),(n()(),I._55(-1,null,["\n        "])),(n()(),I._55(-1,1,["\n        "])),(n()(),I._31(33,0,null,1,19,"core-loading",[],null,null,null,Qn.b,Qn.a)),I._30(34,638976,null,0,Xn.a,[Z.a,I.t,k.a,vn.a],{hideUntil:[0,"hideUntil"]},null),(n()(),I._55(-1,0,["\n            "])),(n()(),I._26(16777216,null,0,1,null,u)),I._30(37,16384,null,0,rn.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(n()(),I._55(-1,0,["\n\n            "])),(n()(),I._31(39,0,null,0,12,"ion-list",[],null,null,null,null,null)),I._30(40,16384,null,0,Yn.a,[ln.a,I.t,I.V,On.a,Kn.l,qn.a],null,null),(n()(),I._55(-1,null,["\n                "])),(n()(),I._26(16777216,null,null,1,null,s)),I._30(43,16384,null,0,rn.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(n()(),I._55(-1,null,["\n                "])),(n()(),I._55(-1,null,["\n                "])),(n()(),I._26(16777216,null,null,1,null,h)),I._30(47,802816,null,0,rn.j,[I._11,I._6,I.E],{ngForOf:[0,"ngForOf"]},null),(n()(),I._55(-1,null,["\n\n                "])),(n()(),I._26(16777216,null,null,1,null,b)),I._30(50,16384,null,0,rn.k,[I._11,I._6],{ngIf:[0,"ngIf"]},null),(n()(),I._55(-1,null,["\n            "])),(n()(),I._55(-1,0,["\n        "])),(n()(),I._55(-1,1,["\n    "])),(n()(),I._55(-1,0,["\n"])),(n()(),I._55(-1,null,["\n"]))],function(n,l){var t=l.component;n(l,6,0);n(l,11,0,t.title),n(l,20,0);n(l,26,0,t.loaded);n(l,29,0,I._34(1,"",I._56(l,29,0,I._44(l,30).transform("core.pulltorefresh")),""));n(l,34,0,t.loaded);n(l,37,0,!t.submissions||0==t.submissions.length);n(l,43,0,t.groupInfo.separateGroups||t.groupInfo.visibleGroups);n(l,47,0,t.submissions);n(l,50,0,!t.haveAllParticipants)},function(n,l){n(l,4,0,I._44(l,5)._hidden,I._44(l,5)._sbPadding);n(l,22,0,I._44(l,23).statusbarPadding,I._44(l,23)._hasRefresher);n(l,25,0,"inactive"!==I._44(l,26).state,I._44(l,26)._top);n(l,28,0,I._44(l,29).r.state)})}Object.defineProperty(l,"__esModule",{value:!0});var I=t(0),P=t(8),x=t(3),y=t(24),S=t(29),k=t(12),C=t(1),A=t(4),O=t(68),w=t(72),D=t(123),G=t(162),j=t(34),$=this&&this.__decorate||function(n,l,t,u){var i,a=arguments.length,e=a<3?l:null===u?u=Object.getOwnPropertyDescriptor(l,t):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(n,l,t,u);else for(var s=n.length-1;s>=0;s--)(i=n[s])&&(e=(a<3?i(e):a>3?i(l,t,e):i(l,t))||e);return a>3&&e&&Object.defineProperty(l,t,e),e},R=this&&this.__metadata||function(n,l){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,l)},T=function(){function n(n,l,t,u,i,a,e,s,o){var r=this;this.domUtils=u,this.translate=i,this.assignProvider=a,this.assignOfflineProvider=e,this.assignHelper=s,this.groupsProvider=o,this.groupId=0,this.groupInfo={groups:[],separateGroups:!1,visibleGroups:!1},this.moduleId=n.get("moduleId"),this.courseId=n.get("courseId"),this.groupId=n.get("groupId"),this.selectedStatus=n.get("status"),this.title=this.translate.instant(this.selectedStatus?this.selectedStatus==w.a.NEED_GRADING?"addon.mod_assign.numberofsubmissionsneedgrading":"addon.mod_assign.submissionstatus_"+this.selectedStatus:"addon.mod_assign.numberofparticipants"),this.gradedObserver=t.on(w.a.GRADED_EVENT,function(n){r.assign&&n.assignmentId==r.assign.id&&n.userId==l.getCurrentSiteUserId()&&(r.loaded=!1,r.refreshAllData().finally(function(){r.loaded=!0}))},l.getCurrentSiteId())}return n.prototype.ngOnInit=function(){var n=this;this.fetchAssignment().finally(function(){!n.selectedSubmissionId&&n.splitviewCtrl.isOn()&&n.submissions.length>0&&n.loadSubmission(n.submissions[0]),n.loaded=!0})},n.prototype.fetchAssignment=function(){var n=this;return this.assignProvider.getAssignment(this.courseId,this.moduleId).then(function(l){return n.title=l.name||n.title,n.assign=l,n.assignProvider.getSubmissions(l.id)}).then(function(l){return l.canviewsubmissions?(n.submissionsData=l,n.groupsProvider.getActivityGroupInfo(n.assign.cmid,!1).then(function(l){return n.groupInfo=l,n.setGroup(n.groupId||l.groups&&l.groups[0]&&l.groups[0].id||0)})):Promise.reject(null)}).catch(function(l){n.domUtils.showErrorModalDefault(l,"Error getting assigment data.")})},n.prototype.setGroup=function(n){var l,t,u=this;return this.groupId=n,this.haveAllParticipants=!0,this.assignHelper.getParticipants(this.assign,this.groupId).then(function(n){u.haveAllParticipants=!0,l=n}).catch(function(){u.haveAllParticipants=!1}).then(function(){if(!u.assign.markingworkflow)return u.assignProvider.getAssignmentGrades(u.assign.id).then(function(n){t=n})}).then(function(){return u.assignProvider.getSubmissionsUserData(u.submissionsData.submissions,u.courseId,u.assign.id,u.assign.blindmarking&&!u.assign.revealidentities,l)}).then(function(n){var l=u.selectedStatus==w.a.NEED_GRADING,i=l?w.a.SUBMISSION_STATUS_SUBMITTED:u.selectedStatus,a=[],e=[];return n.forEach(function(n){i&&i!=n.status||a.push(u.assignOfflineProvider.getSubmissionGrade(u.assign.id,n.userid).catch(function(){}).then(function(i){var a=!1;return i&&n.timemodified<i.timemodified&&(a=!0),(l?u.assignProvider.needsSubmissionToBeGraded(n,u.assign.id):Promise.resolve(!0)).then(function(l){if(l){if("graded"==n.gradingstatus&&!u.assign.markingworkflow){var i=t.filter(function(l){return l.userid==n.userid}).reduce(function(n,l){return n.timemodified>l.timemodified?n:l});i&&i.timemodified<n.timemodified&&(n.gradingstatus=w.a.GRADED_FOLLOWUP_SUBMIT)}n.statusColor=u.assignProvider.getSubmissionStatusColor(n.status),n.gradingColor=u.assignProvider.getSubmissionGradingStatusColor(n.gradingstatus),n.statusTranslated=("success"!=n.statusColor||!n.gradingstatus)&&u.translate.instant("addon.mod_assign.submissionstatus_"+n.status),a?(n.gradingStatusTranslationId="addon.mod_assign.gradenotsynced",n.gradingColor=""):n.gradingStatusTranslationId=("danger"!=n.statusColor||"danger"!=n.gradingColor)&&u.assignProvider.getSubmissionGradingStatusTranslationId(n.gradingstatus),e.push(n)}})}))}),Promise.all(a).then(function(){u.submissions=e})})},n.prototype.loadSubmission=function(n){this.selectedSubmissionId===n.submitid&&this.splitviewCtrl.isOn()||(this.selectedSubmissionId=n.submitid,this.splitviewCtrl.push("AddonModAssignSubmissionReviewPage",{courseId:this.courseId,moduleId:this.moduleId,submitId:n.submitid,blindId:n.blindid}))},n.prototype.refreshAllData=function(){var n=this,l=[];return l.push(this.assignProvider.invalidateAssignmentData(this.courseId)),this.assign&&(l.push(this.assignProvider.invalidateAllSubmissionData(this.assign.id)),l.push(this.assignProvider.invalidateAssignmentUserMappingsData(this.assign.id)),l.push(this.assignProvider.invalidateAssignmentGradesData(this.assign.id)),l.push(this.assignProvider.invalidateListParticipantsData(this.assign.id))),Promise.all(l).finally(function(){return n.fetchAssignment()})},n.prototype.refreshList=function(n){this.refreshAllData().finally(function(){n.complete()})},n.prototype.ngOnDestroy=function(){this.gradedObserver&&this.gradedObserver.off()},$([Object(I._9)(j.a),R("design:type",j.a)],n.prototype,"splitviewCtrl",void 0),n=$([Object(I.m)({selector:"page-addon-mod-assign-submission-list",templateUrl:"submission-list.html"}),R("design:paramtypes",[P.t,C.a,k.a,A.a,x.c,w.a,D.a,G.a,O.a])],n)}(),V=this&&this.__decorate||function(n,l,t,u){var i,a=arguments.length,e=a<3?l:null===u?u=Object.getOwnPropertyDescriptor(l,t):u;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)e=Reflect.decorate(n,l,t,u);else for(var s=n.length-1;s>=0;s--)(i=n[s])&&(e=(a<3?i(e):a>3?i(l,t,e):i(l,t))||e);return a>3&&e&&Object.defineProperty(l,t,e),e},E=function(){function n(){}return n=V([Object(I.I)({declarations:[T],imports:[y.a,S.a,P.l.forChild(T),x.b.forChild()]})],n)}(),M=t(1365),U=t(1366),L=t(1367),N=t(1368),F=t(1369),B=t(1370),q=t(1371),H=t(1372),J=t(1373),K=t(1376),W=t(1377),z=t(1378),Q=t(116),X=t(105),Y=t(27),Z=t(18),nn=t(60),ln=t(6),tn=t(93),un=t(30),an=t(20),en=t(19),sn=t(28),on=t(33),rn=t(7),_n=t(115),dn=t(94),cn=t(32),gn=t(52),fn=t(22),pn=t(147),mn=t(208),hn=t(180),bn=t(21),vn=t(2),In=t(9),Pn=t(179),xn=t(45),yn=t(447),Sn=t(37),kn=t(1374),Cn=t(207),An=t(676),On=t(14),wn=t(1375),Dn=t(350),Gn=t(253),jn=t(41),$n=t(10),Rn=t(26),Tn=t(5),Vn=t(16),En=t(17),Mn=t(25),Un=t(36),Ln=t(448),Nn=t(449),Fn=t(66),Bn=t(178),qn=t(31),Hn=t(104),Jn=t(140),Kn=t(38),Wn=t(195),zn=t(146),Qn=t(49),Xn=t(48),Yn=t(87),Zn=t(63),nl=I._29({encapsulation:2,styles:[],data:{}}),ll=I._27("page-addon-mod-assign-submission-list",T,function(n){return I._57(0,[(n()(),I._31(0,0,null,null,1,"page-addon-mod-assign-submission-list",[],null,null,null,v,nl)),I._30(1,245760,null,0,T,[Zn.a,C.a,k.a,A.a,Z.a,w.a,D.a,G.a,O.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),tl=t(346),ul=t(347),il=t(349),al=t(348),el=t(446),sl=t(675),ol=t(103),rl=t(254);t.d(l,"AddonModAssignSubmissionListPageModuleNgFactory",function(){return _l});var _l=I._28(E,[],function(n){return I._40([I._41(512,I.o,I._21,[[8,[M.a,U.a,L.a,N.a,F.a,B.a,q.a,H.a,J.a,K.a,W.a,z.a,ll]],[3,I.o],I.K]),I._41(4608,rn.m,rn.l,[I.G,[2,rn.v]]),I._41(4608,fn.x,fn.x,[]),I._41(4608,fn.d,fn.d,[]),I._41(4608,tl.b,tl.a,[]),I._41(4608,ul.a,ul.b,[]),I._41(4608,il.b,il.a,[]),I._41(4608,al.b,al.a,[]),I._41(4608,Z.a,Z.a,[el.a,tl.b,ul.a,il.b,al.b,Z.b,Z.c]),I._41(512,rn.b,rn.b,[]),I._41(512,fn.v,fn.v,[]),I._41(512,fn.i,fn.i,[]),I._41(512,fn.s,fn.s,[]),I._41(512,sl.a,sl.a,[]),I._41(512,x.b,x.b,[]),I._41(512,S.a,S.a,[]),I._41(512,ol.a,ol.a,[]),I._41(512,y.a,y.a,[]),I._41(512,sl.b,sl.b,[]),I._41(512,E,E,[]),I._41(256,Z.c,void 0,[]),I._41(256,Z.b,void 0,[]),I._41(256,rl.a,T,[])])})}});