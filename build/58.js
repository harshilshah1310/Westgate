webpackJsonp([58],{1966:function(n,e,l){"use strict";function o(n){return i._57(0,[(n()(),i._31(0,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(n,e,l){var o=!0;if("click"===e){o=!1!==n.component.openSearch()&&o}return o},H.b,H.a)),i._30(1,1097728,[[2,4]],0,z.a,[[8,""],N.a,i.t,i.V],null,null),i._47(131072,q.a,[B.a,i.j]),(n()(),i._55(-1,0,["\n                "])),(n()(),i._31(4,0,null,0,1,"ion-icon",[["name","search"],["role","img"]],[[2,"hide",null]],null,null,null,null)),i._30(5,147456,null,0,G.a,[N.a,i.t,i.V],{name:[0,"name"]},null),(n()(),i._55(-1,0,["\n            "]))],function(n,e){n(e,5,0,"search")},function(n,e){n(e,0,0,i._56(e,0,0,i._44(e,2).transform("core.courses.searchcourses")));n(e,4,0,i._44(e,5)._hidden)})}function t(n){return i._57(0,[(n()(),i._31(0,0,null,null,6,"ion-searchbar",[],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[2,"searchbar-animated",null],[2,"searchbar-has-value",null],[2,"searchbar-active",null],[2,"searchbar-show-cancel",null],[2,"searchbar-left-aligned",null],[2,"searchbar-has-focus",null]],[[null,"ngModelChange"],[null,"ionInput"],[null,"ionCancel"]],function(n,e,l){var o=!0,t=n.component;if("ngModelChange"===e){o=!1!==(t.filter=l)&&o}if("ionInput"===e){o=!1!==t.filterChanged(l)&&o}if("ionCancel"===e){o=!1!==t.filterChanged()&&o}return o},J.b,J.a)),i._30(1,671744,null,0,K.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),i._50(2048,null,K.m,null,[K.q]),i._30(3,16384,null,0,K.n,[K.m],null,null),i._30(4,1294336,[[1,4],["searchbar",4]],0,Y.a,[N.a,$.a,i.t,i.V,[2,K.m]],{placeholder:[0,"placeholder"]},{ionInput:"ionInput",ionCancel:"ionCancel"}),i._47(131072,q.a,[B.a,i.j]),(n()(),i._55(-1,null,["\n        "]))],function(n,e){n(e,1,0,e.component.filter);n(e,4,0,i._56(e,4,0,i._44(e,5).transform("core.courses.filtermycourses")))},function(n,e){n(e,0,1,[i._44(e,3).ngClassUntouched,i._44(e,3).ngClassTouched,i._44(e,3).ngClassPristine,i._44(e,3).ngClassDirty,i._44(e,3).ngClassValid,i._44(e,3).ngClassInvalid,i._44(e,3).ngClassPending,i._44(e,4)._animated,i._44(e,4)._value,i._44(e,4)._isActive,i._44(e,4)._showCancelButton,i._44(e,4)._shouldAlignLeft,i._44(e,4)._isFocus])})}function s(n){return i._57(0,[(n()(),i._31(0,0,null,null,5,"ion-col",[["align-self-stretch",""],["class","col"],["col-12",""],["col-lg-4",""],["col-md-6",""],["col-sm-6",""],["col-xl-4",""],["no-padding",""]],null,null,null,null,null)),i._30(1,16384,null,0,Q.a,[],null,null),(n()(),i._55(-1,null,["\n                    "])),(n()(),i._31(3,0,null,null,1,"core-courses-course-progress",[["class","core-courseoverview"],["showAll","true"]],null,null,null,W.b,W.a)),i._30(4,245760,null,0,X.a,[[2,Z.a],g.a,f.a,nn.a,_.a,h.a,p.a,en.a,ln.a],{course:[0,"course"],showAll:[1,"showAll"]},null),(n()(),i._55(-1,null,["\n                "]))],function(n,e){n(e,4,0,e.context.$implicit,"true")},null)}function r(n){return i._57(0,[(n()(),i._31(0,0,null,null,2,"p",[],null,null,null,null,null)),(n()(),i._55(1,null,["",""])),i._47(131072,q.a,[B.a,i.j])],null,function(n,e){n(e,1,0,i._56(e,1,0,i._44(e,2).transform("core.courses.searchcoursesadvice")))})}function u(n){return i._57(0,[(n()(),i._31(0,0,null,null,6,"core-empty-box",[["icon","ionic"]],null,null,null,on.b,on.a)),i._30(1,49152,null,0,tn.a,[],{message:[0,"message"],icon:[1,"icon"]},null),i._47(131072,q.a,[B.a,i.j]),(n()(),i._55(-1,0,["\n            "])),(n()(),i._26(16777216,null,0,1,null,r)),i._30(5,16384,null,0,sn.k,[i._11,i._6],{ngIf:[0,"ngIf"]},null),(n()(),i._55(-1,0,["\n        "]))],function(n,e){var l=e.component;n(e,1,0,i._56(e,1,0,i._44(e,2).transform("core.courses.nocourses")),"ionic");n(e,5,0,l.searchEnabled)},null)}function a(n){return i._57(0,[i._52(671088640,1,{searchbar:0}),(n()(),i._31(1,0,null,null,32,"ion-header",[],null,null,null,null,null)),i._30(2,16384,null,0,rn.a,[N.a,i.t,i.V,[2,un.a]],null,null),(n()(),i._55(-1,null,["\n    "])),(n()(),i._31(4,0,null,null,28,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,an.b,an.a)),i._30(5,49152,null,0,cn.a,[dn.a,[2,un.a],[2,Z.a],N.a,i.t,i.V],null,null),i._30(6,212992,null,0,_n.a,[cn.a,$.a,B.a,_.a],null,null),(n()(),i._55(-1,3,["\n        "])),(n()(),i._31(8,0,null,3,3,"ion-title",[],null,null,null,hn.b,hn.a)),i._30(9,49152,null,0,fn.a,[N.a,i.t,i.V,[2,pn.a],[2,cn.a]],null,null),(n()(),i._55(10,0,["",""])),i._47(131072,q.a,[B.a,i.j]),(n()(),i._55(-1,3,["\n\n        "])),(n()(),i._31(13,0,null,2,18,"ion-buttons",[["end",""]],null,null,null,null,null)),i._30(14,16384,null,1,bn.a,[N.a,i.t,i.V,[2,pn.a],[2,cn.a]],null,null),i._52(603979776,2,{_buttons:1}),(n()(),i._55(-1,null,["\n            "])),(n()(),i._26(16777216,null,null,1,null,o)),i._30(18,16384,null,0,sn.k,[i._11,i._6],{ngIf:[0,"ngIf"]},null),(n()(),i._55(-1,null,["\n            "])),(n()(),i._31(20,0,null,null,10,"core-context-menu",[],null,null,null,gn.b,gn.a)),i._30(21,245760,null,0,Cn.a,[B.a,en.a,i.t,f.a,[2,vn.a],mn.a],null,null),(n()(),i._55(-1,0,["\n                "])),(n()(),i._31(23,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,l){var o=!0;if("action"===e){o=!1!==n.component.prefetchCourses()&&o}return o},yn.b,yn.a)),i._30(24,770048,null,0,In.a,[Cn.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"],badge:[4,"badge"],hidden:[5,"hidden"]},{action:"action"}),i._47(131072,q.a,[B.a,i.j]),(n()(),i._55(-1,0,["\n                "])),(n()(),i._31(27,0,null,0,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,e,l){var o=!0;if("action"===e){o=!1!==n.component.switchFilter()&&o}return o},yn.b,yn.a)),i._30(28,770048,null,0,In.a,[Cn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),i._47(131072,q.a,[B.a,i.j]),(n()(),i._55(-1,0,["\n            "])),(n()(),i._55(-1,null,["\n        "])),(n()(),i._55(-1,3,["\n    "])),(n()(),i._55(-1,null,["\n"])),(n()(),i._55(-1,null,["\n"])),(n()(),i._31(35,0,null,null,31,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,wn.b,wn.a)),i._30(36,4374528,null,0,Pn.a,[N.a,$.a,Dn.a,i.t,i.V,dn.a,On.a,i.M,[2,un.a],[2,Z.a]],null,null),(n()(),i._55(-1,1,["\n    "])),(n()(),i._31(38,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,e,l){var o=!0;if("ionRefresh"===e){o=!1!==n.component.refreshCourses(l)&&o}return o},null,null)),i._30(39,212992,null,0,An.a,[$.a,Pn.a,i.M,jn.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),i._55(-1,null,["\n        "])),(n()(),i._31(41,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,En.b,En.a)),i._30(42,114688,null,0,Sn.a,[An.a,N.a],{pullingText:[0,"pullingText"]},null),i._47(131072,q.a,[B.a,i.j]),(n()(),i._55(-1,null,["\n    "])),(n()(),i._55(-1,1,["\n\n    "])),(n()(),i._31(46,0,null,1,19,"core-loading",[],null,null,null,Rn.b,Rn.a)),i._30(47,638976,null,0,Un.a,[B.a,i.t,_.a,mn.a],{hideUntil:[0,"hideUntil"]},null),(n()(),i._55(-1,0,["\n        "])),(n()(),i._26(16777216,null,0,1,null,t)),i._30(50,16384,null,0,sn.k,[i._11,i._6],{ngIf:[0,"ngIf"]},null),(n()(),i._55(-1,0,["\n        "])),(n()(),i._31(52,0,null,0,9,"ion-grid",[["class","grid"],["no-padding",""]],null,null,null,null,null)),i._30(53,16384,null,0,Fn.a,[],null,null),(n()(),i._55(-1,null,["\n            "])),(n()(),i._31(55,0,null,null,5,"ion-row",[["class","row"],["no-padding",""]],null,null,null,null,null)),i._30(56,16384,null,0,xn.a,[],null,null),(n()(),i._55(-1,null,["\n                "])),(n()(),i._26(16777216,null,null,1,null,s)),i._30(59,802816,null,0,sn.j,[i._11,i._6,i.E],{ngForOf:[0,"ngForOf"]},null),(n()(),i._55(-1,null,["\n            "])),(n()(),i._55(-1,null,["\n        "])),(n()(),i._55(-1,0,["\n        "])),(n()(),i._26(16777216,null,0,1,null,u)),i._30(64,16384,null,0,sn.k,[i._11,i._6],{ngIf:[0,"ngIf"]},null),(n()(),i._55(-1,0,["\n    "])),(n()(),i._55(-1,1,["\n"])),(n()(),i._55(-1,null,["\n"]))],function(n,e){var l=e.component;n(e,6,0);n(e,18,0,l.searchEnabled),n(e,21,0);n(e,24,0,i._56(e,24,0,i._44(e,25).transform("core.courses.downloadcourses")),l.prefetchCoursesData.icon,!1,800,l.prefetchCoursesData.badge,!l.downloadAllCoursesEnabled||!l.courses||l.courses.length<2);n(e,28,0,i._56(e,28,0,i._44(e,29).transform("core.courses.filtermycourses")),"funnel",700,!l.courses||l.courses.length<=5);n(e,39,0,l.coursesLoaded);n(e,42,0,i._34(1,"",i._56(e,42,0,i._44(e,43).transform("core.pulltorefresh")),""));n(e,47,0,l.coursesLoaded);n(e,50,0,l.showFilter);n(e,59,0,l.filteredCourses);n(e,64,0,!l.courses||!l.courses.length)},function(n,e){n(e,4,0,i._44(e,5)._hidden,i._44(e,5)._sbPadding);n(e,10,0,i._56(e,10,0,i._44(e,11).transform("core.courses.mycourses")));n(e,35,0,i._44(e,36).statusbarPadding,i._44(e,36)._hasRefresher);n(e,38,0,"inactive"!==i._44(e,39).state,i._44(e,39)._top);n(e,41,0,i._44(e,42).r.state)})}Object.defineProperty(e,"__esModule",{value:!0});var i=l(0),c=l(8),d=l(3),_=l(12),h=l(1),f=l(4),p=l(50),b=l(189),g=l(40),C=l(106),v=this&&this.__decorate||function(n,e,l,o){var t,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,l):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,l,o);else for(var u=n.length-1;u>=0;u--)(t=n[u])&&(r=(s<3?t(r):s>3?t(e,l,r):t(e,l))||r);return s>3&&r&&Object.defineProperty(e,l,r),r},m=this&&this.__metadata||function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)},y=function(){function n(n,e,l,o,t,s,r,u){this.navCtrl=n,this.coursesProvider=e,this.domUtils=l,this.eventsProvider=o,this.sitesProvider=t,this.courseHelper=s,this.courseOptionsDelegate=r,this.coursesHelper=u,this.filter="",this.showFilter=!1,this.coursesLoaded=!1,this.prefetchCoursesData={},this.prefetchIconInitialized=!1,this.isDestroyed=!1,this.courseIds=""}return n.prototype.ionViewDidLoad=function(){var n=this;this.searchEnabled=!this.coursesProvider.isSearchCoursesDisabledInSite(),this.downloadAllCoursesEnabled=!this.coursesProvider.isDownloadCoursesDisabledInSite(),this.fetchCourses().finally(function(){n.coursesLoaded=!0}),this.myCoursesObserver=this.eventsProvider.on(p.a.EVENT_MY_COURSES_UPDATED,function(){n.fetchCourses()},this.sitesProvider.getCurrentSiteId()),this.siteUpdatedObserver=this.eventsProvider.on(_.a.SITE_UPDATED,function(){var e=n.downloadAllCoursesEnabled;n.searchEnabled=!n.coursesProvider.isSearchCoursesDisabledInSite(),n.downloadAllCoursesEnabled=!n.coursesProvider.isDownloadCoursesDisabledInSite(),!e&&n.downloadAllCoursesEnabled&&n.coursesLoaded&&n.initPrefetchCoursesIcon()},this.sitesProvider.getCurrentSiteId())},n.prototype.fetchCourses=function(){var n=this;return this.coursesProvider.getUserCourses().then(function(e){var l=[],o=e.map(function(n){return n.id});return n.courseIds=o.join(","),l.push(n.coursesHelper.loadCoursesExtraInfo(e)),n.coursesProvider.canGetAdminAndNavOptions()&&l.push(n.coursesProvider.getCoursesAdminAndNavOptions(o).then(function(n){e.forEach(function(e){e.navOptions=n.navOptions[e.id],e.admOptions=n.admOptions[e.id]})})),Promise.all(l).then(function(){n.courses=e,n.filteredCourses=n.courses,n.filter="",n.initPrefetchCoursesIcon()})}).catch(function(e){n.domUtils.showErrorModalDefault(e,"core.courses.errorloadcourses",!0)})},n.prototype.refreshCourses=function(n){var e=this,l=[];l.push(this.coursesProvider.invalidateUserCourses()),l.push(this.courseOptionsDelegate.clearAndInvalidateCoursesOptions()),this.courseIds&&l.push(this.coursesProvider.invalidateCoursesByField("ids",this.courseIds)),Promise.all(l).finally(function(){e.prefetchIconInitialized=!1,e.fetchCourses().finally(function(){n.complete()})})},n.prototype.switchFilter=function(){var n=this;this.filter="",this.showFilter=!this.showFilter,this.filteredCourses=this.courses,this.showFilter&&setTimeout(function(){n.searchbar.setFocus()},500)},n.prototype.openSearch=function(){this.navCtrl.push("CoreCoursesSearchPage")},n.prototype.filterChanged=function(n){var e=n.target.value&&n.target.value.trim().toLowerCase();this.filteredCourses=e&&this.courses?this.courses.filter(this.courses.length>0&&void 0!==this.courses[0].displayname?function(n){return n.displayname.toLowerCase().indexOf(e)>-1}:function(n){return n.fullname.toLowerCase().indexOf(e)>-1}):this.courses},n.prototype.prefetchCourses=function(){var n=this,e=this.prefetchCoursesData.icon;return this.prefetchCoursesData.icon="spinner",this.prefetchCoursesData.badge="",this.courseHelper.confirmAndPrefetchCourses(this.courses,function(e){n.prefetchCoursesData.badge=e.count+" / "+e.total}).then(function(){n.prefetchCoursesData.icon="ion-android-refresh"}).catch(function(l){n.isDestroyed||(n.domUtils.showErrorModalDefault(l,"core.course.errordownloadingcourse",!0),n.prefetchCoursesData.icon=e)}).finally(function(){n.prefetchCoursesData.badge=""})},n.prototype.initPrefetchCoursesIcon=function(){var n=this;!this.prefetchIconInitialized&&this.downloadAllCoursesEnabled&&(this.prefetchIconInitialized=!0,!this.courses||this.courses.length<2?this.prefetchCoursesData.icon="":this.courseHelper.determineCoursesStatus(this.courses).then(function(e){var l=n.courseHelper.getCourseStatusIconAndTitleFromStatus(e).icon;"spinner"==l&&(l="cloud-download"),n.prefetchCoursesData.icon=l}))},n.prototype.ngOnDestroy=function(){this.isDestroyed=!0,this.myCoursesObserver&&this.myCoursesObserver.off(),this.siteUpdatedObserver&&this.siteUpdatedObserver.off()},v([Object(i._9)("searchbar"),m("design:type",c.y)],n.prototype,"searchbar",void 0),n=v([Object(i.m)({selector:"page-core-courses-my-courses",templateUrl:"my-courses.html"}),m("design:paramtypes",[c.s,p.a,f.a,_.a,h.a,g.a,C.a,b.a])],n)}(),I=l(24),w=l(29),P=l(256),D=this&&this.__decorate||function(n,e,l,o){var t,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,l):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(n,e,l,o);else for(var u=n.length-1;u>=0;u--)(t=n[u])&&(r=(s<3?t(r):s>3?t(e,l,r):t(e,l))||r);return s>3&&r&&Object.defineProperty(e,l,r),r},O=function(){function n(){}return n=D([Object(i.I)({declarations:[y],imports:[I.a,w.a,P.a,c.l.forChild(y),d.b.forChild()]})],n)}(),A=l(1365),j=l(1366),E=l(1367),S=l(1368),R=l(1369),U=l(1370),F=l(1371),x=l(1372),M=l(1373),V=l(1376),k=l(1377),L=l(1378),T=l(1393),H=l(46),z=l(43),N=l(6),q=l(27),B=l(18),G=l(45),J=l(1439),K=l(22),Y=l(367),$=l(14),Q=l(113),W=l(380),X=l(270),Z=l(21),nn=l(15),en=l(65),ln=l(42),on=l(116),tn=l(105),sn=l(7),rn=l(447),un=l(37),an=l(1374),cn=l(207),dn=l(32),_n=l(676),hn=l(1375),fn=l(350),pn=l(253),bn=l(448),gn=l(81),Cn=l(70),vn=l(69),mn=l(2),yn=l(82),In=l(74),wn=l(178),Pn=l(25),Dn=l(31),On=l(104),An=l(140),jn=l(38),En=l(195),Sn=l(146),Rn=l(49),Un=l(48),Fn=l(142),xn=l(114),Mn=i._29({encapsulation:2,styles:[],data:{}}),Vn=i._27("page-core-courses-my-courses",y,function(n){return i._57(0,[(n()(),i._31(0,0,null,null,1,"page-core-courses-my-courses",[],null,null,null,a,Mn)),i._30(1,180224,null,0,y,[Z.a,p.a,f.a,_.a,h.a,g.a,C.a,b.a],null,null)],null,null)},{},{},[]),kn=l(346),Ln=l(347),Tn=l(349),Hn=l(348),zn=l(446),Nn=l(675),qn=l(103),Bn=l(254);l.d(e,"CoreCoursesMyCoursesPageModuleNgFactory",function(){return Gn});var Gn=i._28(O,[],function(n){return i._40([i._41(512,i.o,i._21,[[8,[A.a,j.a,E.a,S.a,R.a,U.a,F.a,x.a,M.a,V.a,k.a,L.a,T.a,Vn]],[3,i.o],i.K]),i._41(4608,sn.m,sn.l,[i.G,[2,sn.v]]),i._41(4608,K.x,K.x,[]),i._41(4608,K.d,K.d,[]),i._41(4608,kn.b,kn.a,[]),i._41(4608,Ln.a,Ln.b,[]),i._41(4608,Tn.b,Tn.a,[]),i._41(4608,Hn.b,Hn.a,[]),i._41(4608,B.a,B.a,[zn.a,kn.b,Ln.a,Tn.b,Hn.b,B.b,B.c]),i._41(512,sn.b,sn.b,[]),i._41(512,K.v,K.v,[]),i._41(512,K.i,K.i,[]),i._41(512,K.s,K.s,[]),i._41(512,Nn.a,Nn.a,[]),i._41(512,d.b,d.b,[]),i._41(512,w.a,w.a,[]),i._41(512,qn.a,qn.a,[]),i._41(512,I.a,I.a,[]),i._41(512,P.a,P.a,[]),i._41(512,Nn.b,Nn.b,[]),i._41(512,O,O,[]),i._41(256,B.c,void 0,[]),i._41(256,B.b,void 0,[]),i._41(256,Bn.a,y,[])])})}});