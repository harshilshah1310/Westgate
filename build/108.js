webpackJsonp([108],{1884:function(l,n,u){"use strict";function t(l){return _._42(0,[(l()(),_._16(0,0,null,null,9,"div",[["class","addon-mod-chat-notice"],["text-center",""]],null,null,null,null,null)),(l()(),_._40(-1,null,["\n                "])),(l()(),_._16(2,0,null,null,6,"ion-badge",[["color","light"],["text-wrap",""]],null,null,null,null,null)),_._15(3,16384,null,0,W.a,[E.a,_.p,_.K],{color:[0,"color"]},null),(l()(),_._40(-1,null,["\n                    "])),(l()(),_._16(5,0,null,null,2,"span",[],null,null,null,null,null)),(l()(),_._40(6,null,["",""])),_._34(7,2),(l()(),_._40(-1,null,["\n                "])),(l()(),_._40(-1,null,["\n            "]))],function(l,n){l(n,3,0,"light")},function(l,n){l(n,6,0,_._41(n,6,0,l(n,7,0,_._29(n.parent.parent,0),1e3*n.parent.context.$implicit.timestamp,"strftimedayshort")))})}function a(l){return _._42(0,[(l()(),_._16(0,0,null,null,11,"div",[["class","addon-mod-chat-notice"],["text-center",""]],null,null,null,null,null)),(l()(),_._40(-1,null,["\n                "])),(l()(),_._16(2,0,null,null,8,"ion-badge",[["color","light"],["text-wrap",""]],null,null,null,null,null)),_._15(3,16384,null,0,W.a,[E.a,_.p,_.K],{color:[0,"color"]},null),(l()(),_._40(-1,null,["\n                    "])),(l()(),_._16(5,0,null,null,4,"span",[],null,null,null,null,null)),(l()(),_._40(6,null,[""," ",""])),_._34(7,2),_._33(8,{$a:0}),_._32(131072,F.a,[O.a,_.i]),(l()(),_._40(-1,null,["\n                "])),(l()(),_._40(-1,null,["\n            "]))],function(l,n){l(n,3,0,"light")},function(l,n){l(n,6,0,_._41(n,6,0,l(n,7,0,_._29(n.parent.parent,0),1e3*n.parent.context.$implicit.timestamp,"strftimetime")),_._41(n,6,1,_._29(n,9).transform("addon.mod_chat.messageenter",l(n,8,0,n.parent.context.$implicit.userfullname))))})}function e(l){return _._42(0,[(l()(),_._16(0,0,null,null,11,"div",[["class","addon-mod-chat-notice"],["text-center",""]],null,null,null,null,null)),(l()(),_._40(-1,null,["\n                "])),(l()(),_._16(2,0,null,null,8,"ion-badge",[["color","light"],["text-wrap",""]],null,null,null,null,null)),_._15(3,16384,null,0,W.a,[E.a,_.p,_.K],{color:[0,"color"]},null),(l()(),_._40(-1,null,["\n                    "])),(l()(),_._16(5,0,null,null,4,"span",[],null,null,null,null,null)),(l()(),_._40(6,null,[""," ",""])),_._34(7,2),_._33(8,{$a:0}),_._32(131072,F.a,[O.a,_.i]),(l()(),_._40(-1,null,["\n                "])),(l()(),_._40(-1,null,["\n            "]))],function(l,n){l(n,3,0,"light")},function(l,n){l(n,6,0,_._41(n,6,0,l(n,7,0,_._29(n.parent.parent,0),1e3*n.parent.context.$implicit.timestamp,"strftimetime")),_._41(n,6,1,_._29(n,9).transform("addon.mod_chat.messageexit",l(n,8,0,n.parent.context.$implicit.userfullname))))})}function s(l){return _._42(0,[(l()(),_._16(0,0,null,null,23,"ion-item",[["class","addon-mod-chat-message item item-block"],["text-wrap",""]],null,null,null,j.b,j.a)),_._15(1,1097728,null,3,A.a,[B.a,E.a,_.p,_.K,[2,C.a]],null,null),_._37(335544320,1,{contentLabel:0}),_._37(603979776,2,{_buttons:1}),_._37(603979776,3,{_icons:1}),_._15(5,16384,null,0,J.a,[],null,null),(l()(),_._40(-1,2,["\n                "])),(l()(),_._16(7,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,null,null,L.b,L.a)),_._15(8,770048,null,0,N.a,[q.a,z.a,G.a,H.a,Q.a],{user:[0,"user"]},null),_._15(9,16384,null,0,V.a,[],null,null),(l()(),_._40(-1,2,["\n                "])),(l()(),_._16(11,0,null,2,8,"h2",[],null,null,null,null,null)),(l()(),_._40(-1,null,["\n                    "])),(l()(),_._16(13,0,null,null,2,"p",[["float-end",""]],null,null,null,null,null)),(l()(),_._40(14,null,["",""])),_._34(15,2),(l()(),_._40(-1,null,["\n                    "])),(l()(),_._16(17,0,null,null,1,"core-format-text",[],null,null,null,null,null)),_._15(18,540672,null,0,X.a,[_.p,z.a,f.a,Y.a,O.a,Z.a,G.a,ll.a,nl.a,ul.a,H.a,tl.a,[2,q.a],[2,al.a],[2,el.a],sl.a,Q.a],{text:[0,"text"]},null),(l()(),_._40(-1,null,["\n                "])),(l()(),_._40(-1,2,["\n                "])),(l()(),_._16(21,0,null,2,1,"core-format-text",[],null,null,null,null,null)),_._15(22,540672,null,0,X.a,[_.p,z.a,f.a,Y.a,O.a,Z.a,G.a,ll.a,nl.a,ul.a,H.a,tl.a,[2,q.a],[2,al.a],[2,el.a],sl.a,Q.a],{text:[0,"text"]},null),(l()(),_._40(-1,2,["\n            "]))],function(l,n){l(n,8,0,n.parent.context.$implicit);l(n,18,0,n.parent.context.$implicit.userfullname);l(n,22,0,n.parent.context.$implicit.message)},function(l,n){l(n,14,0,_._41(n,14,0,l(n,15,0,_._29(n.parent.parent,0),1e3*n.parent.context.$implicit.timestamp,"strftimetime")))})}function i(l){return _._42(0,[(l()(),_._16(0,0,null,null,13,"div",[],null,null,null,null,null)),(l()(),_._40(-1,null,["\n            "])),(l()(),_._11(16777216,null,null,1,null,t)),_._15(3,16384,null,0,il.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(l()(),_._40(-1,null,["\n\n            "])),(l()(),_._11(16777216,null,null,1,null,a)),_._15(6,16384,null,0,il.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(l()(),_._40(-1,null,["\n\n            "])),(l()(),_._11(16777216,null,null,1,null,e)),_._15(9,16384,null,0,il.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(l()(),_._40(-1,null,["\n\n            "])),(l()(),_._11(16777216,null,null,1,null,s)),_._15(12,16384,null,0,il.k,[_.W,_.T],{ngIf:[0,"ngIf"]},null),(l()(),_._40(-1,null,["\n        "]))],function(l,n){var u=n.component;l(n,3,0,u.showDate(u.messages[n.context.index],u.messages[n.context.index-1]));l(n,6,0,n.context.$implicit.issystem&&"enter"==n.context.$implicit.message);l(n,9,0,n.context.$implicit.issystem&&"exit"==n.context.$implicit.message);l(n,12,0,!n.context.$implicit.issystem&&"beep"!=n.context.$implicit.message.substr(0,4))},null)}function o(l){return _._42(0,[_._32(0,ol.a,[nl.a,_l.a]),(l()(),_._16(1,0,null,null,12,"ion-header",[],null,null,null,null,null)),_._15(2,16384,null,0,rl.a,[E.a,_.p,_.K,[2,cl.a]],null,null),(l()(),_._40(-1,null,["\n    "])),(l()(),_._16(4,0,null,null,8,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,dl.b,dl.a)),_._15(5,49152,null,0,pl.a,[ml.a,[2,cl.a],[2,q.a],E.a,_.p,_.K],null,null),_._15(6,212992,null,0,fl.a,[pl.a,Z.a,O.a,Q.a],null,null),(l()(),_._40(-1,3,["\n        "])),(l()(),_._16(8,0,null,3,3,"ion-title",[],null,null,null,hl.b,hl.a)),_._15(9,49152,null,0,gl.a,[E.a,_.p,_.K,[2,bl.a],[2,pl.a]],null,null),(l()(),_._40(10,0,["",""])),_._32(131072,F.a,[O.a,_.i]),(l()(),_._40(-1,3,["\n    "])),(l()(),_._40(-1,null,["\n"])),(l()(),_._40(-1,null,["\n"])),(l()(),_._16(15,0,null,null,17,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,xl.b,xl.a)),_._15(16,4374528,null,0,al.a,[E.a,Z.a,vl.a,_.p,_.K,ml.a,Il.a,_.D,[2,cl.a],[2,q.a]],null,null),(l()(),_._40(-1,1,["\n    "])),(l()(),_._16(18,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(l,n,u){var t=!0;if("ionRefresh"===n){t=!1!==l.component.refreshMessages(u)&&t}return t},null,null)),_._15(19,212992,null,0,$l.a,[Z.a,al.a,_.D,yl.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(l()(),_._40(-1,null,["\n        "])),(l()(),_._16(21,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Ml.b,Ml.a)),_._15(22,114688,null,0,wl.a,[$l.a,E.a],{pullingText:[0,"pullingText"]},null),_._32(131072,F.a,[O.a,_.i]),(l()(),_._40(-1,null,["\n    "])),(l()(),_._40(-1,1,["\n    "])),(l()(),_._16(26,0,null,1,5,"core-loading",[],null,null,null,Kl.b,Kl.a)),_._15(27,638976,null,0,Pl.a,[O.a,_.p,Q.a,G.a],{hideUntil:[0,"hideUntil"]},null),(l()(),_._40(-1,0,["\n        "])),(l()(),_._11(16777216,null,0,1,null,i)),_._15(30,802816,null,0,il.j,[_.W,_.T,_.v],{ngForOf:[0,"ngForOf"]},null),(l()(),_._40(-1,0,["\n    "])),(l()(),_._40(-1,1,["\n"])),(l()(),_._40(-1,null,["\n"]))],function(l,n){var u=n.component;l(n,6,0);l(n,19,0,u.loaded);l(n,22,0,_._19(1,"",_._41(n,22,0,_._29(n,23).transform("core.pulltorefresh")),""));l(n,27,0,u.loaded);l(n,30,0,u.messages)},function(l,n){l(n,4,0,_._29(n,5)._hidden,_._29(n,5)._sbPadding);l(n,10,0,_._41(n,10,0,_._29(n,11).transform("addon.mod_chat.messages")));l(n,15,0,_._29(n,16).statusbarPadding,_._29(n,16)._hasRefresher);l(n,18,0,"inactive"!==_._29(n,19).state,_._29(n,19)._top);l(n,21,0,_._29(n,22).r.state)})}Object.defineProperty(n,"__esModule",{value:!0});var _=u(1),r=(u(0),u(9),u(4)),c=u(25),d=u(30),p=u(104),m=u(682),f=u(5),h=u(258),g=u(14),b=function(){function l(l,n,u){this.domUtils=n,this.chatProvider=u,this.loaded=!1,this.messages=[],this.courseId=l.get("courseId"),this.chatId=l.get("chatId"),this.groupId=l.get("groupId"),this.sessionStart=l.get("sessionStart"),this.sessionEnd=l.get("sessionEnd"),this.fetchMessages()}return l.prototype.fetchMessages=function(){var l=this;return this.chatProvider.getSessionMessages(this.chatId,this.sessionStart,this.sessionEnd,this.groupId).then(function(n){return l.chatProvider.getMessagesUserData(n,l.courseId).then(function(n){l.messages=n})}).catch(function(n){l.domUtils.showErrorModalDefault(n,"core.errorloadingcontent",!0)}).finally(function(){l.loaded=!0})},l.prototype.refreshMessages=function(l){var n=this;this.chatProvider.invalidateSessionMessages(this.chatId,this.sessionStart,this.groupId).finally(function(){n.fetchMessages().finally(function(){l.complete()})})},l.prototype.showDate=function(l,n){return!n||!g(1e3*l.timestamp).isSame(1e3*n.timestamp,"day")},l}(),x=function(){return function(){}}(),v=u(1365),I=u(1366),$=u(1367),y=u(1368),M=u(1369),w=u(1370),K=u(1371),P=u(1372),S=u(1373),k=u(1376),T=u(1377),D=u(1378),R=u(1379),U=u(1398),W=u(148),E=u(7),F=u(28),O=u(19),j=u(31),A=u(21),B=u(20),C=u(29),J=u(34),L=u(208),N=u(180),q=u(22),z=u(2),G=u(3),H=u(10),Q=u(13),V=u(179),X=u(42),Y=u(11),Z=u(15),ll=u(27),nl=u(6),ul=u(17),tl=u(18),al=u(26),el=u(35),sl=u(37),il=u(8),ol=u(231),_l=u(24),rl=u(447),cl=u(38),dl=u(1374),pl=u(207),ml=u(33),fl=u(676),hl=u(1375),gl=u(350),bl=u(253),xl=u(178),vl=u(32),Il=u(105),$l=u(141),yl=u(39),Ml=u(195),wl=u(147),Kl=u(50),Pl=u(49),Sl=u(64),kl=_._14({encapsulation:2,styles:[],data:{}}),Tl=_._12("page-addon-mod-chat-session-messages",b,function(l){return _._42(0,[(l()(),_._16(0,0,null,null,1,"page-addon-mod-chat-session-messages",[],null,null,null,o,kl)),_._15(1,49152,null,0,b,[Sl.a,f.a,h.a],null,null)],null,null)},{},{},[]),Dl=u(23),Rl=u(346),Ul=u(347),Wl=u(349),El=u(348),Fl=u(446),Ol=u(675),jl=u(68),Al=u(254);u.d(n,"AddonModChatSessionMessagesPageModuleNgFactory",function(){return Bl});var Bl=_._13(x,[],function(l){return _._25([_._26(512,_.n,_._6,[[8,[v.a,I.a,$.a,y.a,M.a,w.a,K.a,P.a,S.a,k.a,T.a,D.a,R.a,U.a,Tl]],[3,_.n],_.B]),_._26(4608,il.m,il.l,[_.x,[2,il.v]]),_._26(4608,Dl.x,Dl.x,[]),_._26(4608,Dl.d,Dl.d,[]),_._26(4608,Rl.b,Rl.a,[]),_._26(4608,Ul.a,Ul.b,[]),_._26(4608,Wl.b,Wl.a,[]),_._26(4608,El.b,El.a,[]),_._26(4608,O.a,O.a,[Fl.a,Rl.b,Ul.a,Wl.b,El.b,O.b,O.c]),_._26(512,il.b,il.b,[]),_._26(512,Dl.v,Dl.v,[]),_._26(512,Dl.i,Dl.i,[]),_._26(512,Dl.s,Dl.s,[]),_._26(512,Ol.a,Ol.a,[]),_._26(512,r.a,r.a,[]),_._26(512,d.a,d.a,[]),_._26(512,p.a,p.a,[]),_._26(512,c.a,c.a,[]),_._26(512,jl.a,jl.a,[]),_._26(512,m.a,m.a,[]),_._26(512,Ol.b,Ol.b,[]),_._26(512,x,x,[]),_._26(256,O.c,void 0,[]),_._26(256,O.b,void 0,[]),_._26(256,Al.a,b,[])])})}});