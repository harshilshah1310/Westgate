webpackJsonp([14],{1971:function(n,l,u){"use strict";function t(n){return T._57(0,[(n()(),T._31(0,0,null,null,5,"ion-note",[["float-end",""],["padding-left",""]],null,null,null,null,null)),T._30(1,16384,null,0,Yn.a,[Cn.a,T.t,T.V],null,null),(n()(),T._31(2,0,null,null,1,"ion-icon",[["name","time"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(3,147456,null,0,Hn.a,[Cn.a,T.t,T.V],{name:[0,"name"]},null),(n()(),T._55(4,null,[" ",""])),T._47(131072,$n.a,[Sn.a,T.j])],function(n,l){n(l,3,0,"time")},function(n,l){n(l,2,0,T._44(l,3)._hidden);n(l,4,0,T._56(l,4,0,T._44(l,5).transform("core.notsent")))})}function o(n){return T._57(0,[(n()(),T._31(0,0,null,null,4,"div",[],null,null,null,null,null)),(n()(),T._31(1,0,null,null,1,"core-icon",[["color","primary"],["name","fa-circle"]],null,null,null,Kn.b,Kn.a)),T._30(2,245760,null,0,zn.a,[T.t],{name:[0,"name"],color:[1,"color"]},null),(n()(),T._55(3,null,[" ",""])),T._47(131072,$n.a,[Sn.a,T.j])],function(n,l){n(l,2,0,"fa-circle","primary")},function(n,l){n(l,3,0,T._56(l,3,0,T._44(l,4).transform("addon.mod_forum.unread")))})}function e(n){return T._57(0,[(n()(),T._31(0,0,null,null,6,"ion-note",[["float-end",""],["padding-left",""],["text-end",""]],null,null,null,null,null)),T._30(1,16384,null,0,Yn.a,[Cn.a,T.t,T.V],null,null),(n()(),T._55(2,null,["\n                ","\n                "])),T._49(3,1),(n()(),T._26(16777216,null,null,1,null,o)),T._30(5,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,null,["\n            "]))],function(n,l){var u=l.component;n(l,5,0,u.trackPosts&&!u.post.postread)},function(n,l){var u=l.component;n(l,2,0,T._56(l,2,0,n(l,3,0,T._44(l.parent,0),u.post.modified)))})}function a(n){return T._57(0,[(n()(),T._31(0,0,null,null,1,"core-file",[],null,null,null,Gn.b,Gn.a)),T._30(1,245760,null,0,Wn.a,[H.a,K.a,Y.a,En.a,$.a,Jn.a,Qn.a,q.a,jn.a],{file:[0,"file"],component:[1,"component"],componentId:[2,"componentId"]},null)],function(n,l){var u=l.component;n(l,1,0,l.parent.context.$implicit,u.component,u.componentId)},null)}function i(n){return T._57(0,[(n()(),T._31(0,0,null,null,1,"core-local-file",[],null,null,null,Xn.b,Xn.a)),T._30(1,114688,null,0,Zn.a,[Qn.a,K.a,Sn.a,jn.a,nl.a,Y.a,ll.a],{file:[0,"file"]},null)],function(n,l){n(l,1,0,l.parent.context.$implicit)},null)}function r(n){return T._57(0,[(n()(),T._31(0,0,null,null,9,null,null,null,null,null,null,null)),(n()(),T._55(-1,null,["\n            "])),(n()(),T._55(-1,null,["\n            "])),(n()(),T._26(16777216,null,null,1,null,a)),T._30(4,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,null,["\n            "])),(n()(),T._55(-1,null,["\n            "])),(n()(),T._26(16777216,null,null,1,null,i)),T._30(8,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,null,["\n        "]))],function(n,l){n(l,4,0,!l.context.$implicit.name);n(l,8,0,l.context.$implicit.name)},null)}function s(n){return T._57(0,[(n()(),T._31(0,0,null,null,1,"core-rating-rate",[["contextLevel","module"]],null,[[null,"onUpdate"]],function(n,l,u){var t=!0;if("onUpdate"===l){t=!1!==n.component.ratingUpdated()&&t}return t},ul.b,ul.a)),T._30(1,573440,null,0,tl.a,[Y.a,Sn.a,G.a,W.a],{ratingInfo:[0,"ratingInfo"],contextLevel:[1,"contextLevel"],instanceId:[2,"instanceId"],itemId:[3,"itemId"],itemSetId:[4,"itemSetId"],courseId:[5,"courseId"],aggregateMethod:[6,"aggregateMethod"],scaleId:[7,"scaleId"],userId:[8,"userId"]},{onUpdate:"onUpdate"})],function(n,l){var u=l.component;n(l,1,0,u.ratingInfo,"module",u.componentId,u.post.id,u.discussionId,u.courseId,u.forum.assessed,u.forum.scale,u.post.userid)},null)}function c(n){return T._57(0,[(n()(),T._31(0,0,null,null,1,"core-rating-aggregate",[["contextLevel","module"]],null,null,null,ol.b,ol.a)),T._30(1,704512,null,0,el.a,[q.a,al.a],{ratingInfo:[0,"ratingInfo"],contextLevel:[1,"contextLevel"],instanceId:[2,"instanceId"],itemId:[3,"itemId"],aggregateMethod:[4,"aggregateMethod"],scaleId:[5,"scaleId"],courseId:[6,"courseId"]},null)],function(n,l){var u=l.component;n(l,1,0,u.ratingInfo,"module",u.componentId,u.post.id,u.forum.assessed,u.forum.scale,u.courseId)},null)}function _(n){return T._57(0,[(n()(),T._31(0,0,null,null,14,"ion-item",[["class","addon-forum-reply-button item item-block"],["no-padding",""],["text-end",""]],null,null,null,il.b,il.a)),T._30(1,1097728,null,3,rl.a,[sl.a,Cn.a,T.t,T.V,[2,cl.a]],null,null),T._52(335544320,4,{contentLabel:0}),T._52(603979776,5,{_buttons:1}),T._52(603979776,6,{_icons:1}),T._30(5,16384,null,0,_l.a,[],null,null),(n()(),T._55(-1,2,["\n    "])),(n()(),T._31(7,0,null,2,6,"button",[["clear",""],["icon-left",""],["ion-button",""],["small",""]],[[1,"aria-controls",0],[1,"aria-expanded",0]],[[null,"click"]],function(n,l,u){var t=!0;if("click"===l){t=!1!==n.component.showReply()&&t}return t},dl.b,dl.a)),T._30(8,1097728,[[5,4]],0,fl.a,[[8,""],Cn.a,T.t,T.V],{small:[0,"small"],clear:[1,"clear"]},null),(n()(),T._55(-1,0,["\n        "])),(n()(),T._31(10,0,null,0,1,"ion-icon",[["name","undo"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(11,147456,null,0,Hn.a,[Cn.a,T.t,T.V],{name:[0,"name"]},null),(n()(),T._55(12,0,[" ","\n    "])),T._47(131072,$n.a,[Sn.a,T.j]),(n()(),T._55(-1,2,["\n"]))],function(n,l){n(l,8,0,"","");n(l,11,0,"undo")},function(n,l){var u=l.component;n(l,7,0,"addon-forum-reply-edit-form-"+u.uniqueId,u.replyData.replyingTo===u.post.id);n(l,10,0,T._44(l,11)._hidden);n(l,12,0,T._56(l,12,0,T._44(l,13).transform("addon.mod_forum.reply")))})}function d(n){return T._57(0,[(n()(),T._31(0,0,null,null,14,"ion-item",[["class","item item-block"],["text-end",""]],null,null,null,il.b,il.a)),T._30(1,1097728,null,3,rl.a,[sl.a,Cn.a,T.t,T.V,[2,cl.a]],null,null),T._52(335544320,7,{contentLabel:0}),T._52(603979776,8,{_buttons:1}),T._52(603979776,9,{_icons:1}),T._30(5,16384,null,0,_l.a,[],null,null),(n()(),T._55(-1,2,["\n    "])),(n()(),T._31(7,0,null,2,6,"button",[["clear",""],["icon-left",""],["ion-button",""],["small",""]],[[1,"aria-controls",0],[1,"aria-expanded",0]],[[null,"click"]],function(n,l,u){var t=!0;if("click"===l){t=!1!==n.component.editReply()&&t}return t},dl.b,dl.a)),T._30(8,1097728,[[8,4]],0,fl.a,[[8,""],Cn.a,T.t,T.V],{small:[0,"small"],clear:[1,"clear"]},null),(n()(),T._55(-1,0,["\n        "])),(n()(),T._31(10,0,null,0,1,"ion-icon",[["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(11,147456,null,0,Hn.a,[Cn.a,T.t,T.V],{name:[0,"name"]},null),(n()(),T._55(12,0,[" ","\n    "])),T._47(131072,$n.a,[Sn.a,T.j]),(n()(),T._55(-1,2,["\n"]))],function(n,l){n(l,8,0,"","");n(l,11,0,"create")},function(n,l){var u=l.component;n(l,7,0,"addon-forum-reply-edit-form-"+u.uniqueId,u.replyData.replyingTo===u.post.parent);n(l,10,0,T._44(l,11)._hidden);n(l,12,0,T._56(l,12,0,T._44(l,13).transform("addon.mod_forum.edit")))})}function f(n){return T._57(0,[(n()(),T._31(0,0,null,null,1,"core-attachments",[],null,null,null,ml.b,ml.a)),T._30(1,114688,null,0,pl.a,[$.a,Y.a,jn.a,z.a,Sn.a,gl.a],{files:[0,"files"],maxSize:[1,"maxSize"],maxSubmissions:[2,"maxSubmissions"],component:[3,"component"],componentId:[4,"componentId"],allowOffline:[5,"allowOffline"]},null)],function(n,l){var u=l.component;n(l,1,0,u.replyData.files,u.forum.maxbytes,u.forum.maxattachments,u.component,u.forum.cmid,!0)},null)}function m(n){return T._57(0,[(n()(),T._31(0,0,null,null,11,"ion-row",[["class","row"]],null,null,null,null,null)),T._30(1,16384,null,0,hl.a,[],null,null),(n()(),T._55(-1,null,["\n            "])),(n()(),T._31(3,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),T._30(4,16384,null,0,Il.a,[],null,null),(n()(),T._55(-1,null,["\n                "])),(n()(),T._31(6,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(n,l,u){var t=!0;if("click"===l){t=!1!==n.component.discard()&&t}return t},dl.b,dl.a)),T._30(7,1097728,null,0,fl.a,[[8,""],Cn.a,T.t,T.V],{color:[0,"color"],block:[1,"block"]},null),(n()(),T._55(8,0,["",""])),T._47(131072,$n.a,[Sn.a,T.j]),(n()(),T._55(-1,null,["\n            "])),(n()(),T._55(-1,null,["\n        "]))],function(n,l){n(l,7,0,"light","")},function(n,l){n(l,8,0,T._56(l,8,0,T._44(l,9).transform("core.discard")))})}function p(n){return T._57(0,[(n()(),T._31(0,0,null,null,71,"ion-list",[],[[8,"id",0]],null,null,null,null)),T._30(1,16384,null,0,bl.a,[Cn.a,T.t,T.V,Vn.a,vl.l,yl.a],null,null),(n()(),T._55(-1,null,["\n    "])),(n()(),T._31(3,0,null,null,18,"ion-item",[["class","item item-block"]],null,null,null,il.b,il.a)),T._30(4,1097728,null,3,rl.a,[sl.a,Cn.a,T.t,T.V,[2,cl.a]],null,null),T._52(335544320,10,{contentLabel:0}),T._52(603979776,11,{_buttons:1}),T._52(603979776,12,{_icons:1}),T._30(8,16384,null,0,_l.a,[],null,null),(n()(),T._55(-1,2,["\n        "])),(n()(),T._31(10,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,null,null)),T._30(11,16384,[[10,4]],0,Pl.a,[Cn.a,T.t,T.V,[8,null],[8,""],[8,null],[8,null]],null,null),(n()(),T._55(12,null,["",""])),T._47(131072,$n.a,[Sn.a,T.j]),(n()(),T._55(-1,2,["\n        "])),(n()(),T._31(15,0,null,3,5,"ion-input",[["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"]],function(n,l,u){var t=!0;if("ngModelChange"===l){t=!1!==(n.component.replyData.subject=u)&&t}return t},kl.b,kl.a)),T._30(16,671744,null,0,Cl.q,[[8,null],[8,null],[8,null],[8,null]],{model:[0,"model"]},{update:"ngModelChange"}),T._50(2048,null,Cl.m,null,[Cl.q]),T._30(18,16384,null,0,Cl.n,[Cl.m],null,null),T._30(19,5423104,null,0,Ol.a,[Cn.a,Vn.a,sl.a,Dl.a,T.t,T.V,[2,Mn.a],[2,rl.a],[2,Cl.m],yl.a],{type:[0,"type"],placeholder:[1,"placeholder"]},null),T._47(131072,$n.a,[Sn.a,T.j]),(n()(),T._55(-1,2,["\n    "])),(n()(),T._55(-1,null,["\n    "])),(n()(),T._31(23,0,null,null,15,"ion-item",[["class","item item-block"]],null,null,null,il.b,il.a)),T._30(24,1097728,null,3,rl.a,[sl.a,Cn.a,T.t,T.V,[2,cl.a]],null,null),T._52(335544320,13,{contentLabel:0}),T._52(603979776,14,{_buttons:1}),T._52(603979776,15,{_icons:1}),T._30(28,16384,null,0,_l.a,[],null,null),(n()(),T._55(-1,2,["\n        "])),(n()(),T._31(30,0,null,1,3,"ion-label",[["stacked",""]],null,null,null,null,null)),T._30(31,16384,[[13,4]],0,Pl.a,[Cn.a,T.t,T.V,[8,null],[8,""],[8,null],[8,null]],null,null),(n()(),T._55(32,null,["",""])),T._47(131072,$n.a,[Sn.a,T.j]),(n()(),T._55(-1,2,["\n        "])),(n()(),T._31(35,0,null,3,2,"core-rich-text-editor",[["item-content",""]],null,[[null,"contentChanged"]],function(n,l,u){var t=!0;if("contentChanged"===l){t=!1!==n.component.onMessageChange(u)&&t}return t},xl.b,xl.a)),T._30(36,1228800,null,0,jl.a,[Y.a,wn.a,H.a,En.a,[2,Mn.a],T.t,q.a,K.a,Vn.a],{placeholder:[0,"placeholder"],control:[1,"control"],name:[2,"name"],component:[3,"component"],componentId:[4,"componentId"]},{contentChanged:"contentChanged"}),T._47(131072,$n.a,[Sn.a,T.j]),(n()(),T._55(-1,2,["\n    "])),(n()(),T._55(-1,null,["\n    "])),(n()(),T._26(16777216,null,null,1,null,f)),T._30(41,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,null,["\n    "])),(n()(),T._31(43,0,null,null,27,"ion-grid",[["class","grid"]],null,null,null,null,null)),T._30(44,16384,null,0,Sl.a,[],null,null),(n()(),T._55(-1,null,["\n        "])),(n()(),T._31(46,0,null,null,20,"ion-row",[["class","row"]],null,null,null,null,null)),T._30(47,16384,null,0,hl.a,[],null,null),(n()(),T._55(-1,null,["\n            "])),(n()(),T._31(49,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),T._30(50,16384,null,0,Il.a,[],null,null),(n()(),T._55(-1,null,["\n                "])),(n()(),T._31(52,0,null,null,3,"button",[["block",""],["ion-button",""]],[[8,"disabled",0]],[[null,"click"]],function(n,l,u){var t=!0;if("click"===l){t=!1!==n.component.reply()&&t}return t},dl.b,dl.a)),T._30(53,1097728,null,0,fl.a,[[8,""],Cn.a,T.t,T.V],{block:[0,"block"]},null),(n()(),T._55(54,0,["",""])),T._47(131072,$n.a,[Sn.a,T.j]),(n()(),T._55(-1,null,["\n            "])),(n()(),T._55(-1,null,["\n            "])),(n()(),T._31(58,0,null,null,7,"ion-col",[["class","col"]],null,null,null,null,null)),T._30(59,16384,null,0,Il.a,[],null,null),(n()(),T._55(-1,null,["\n                "])),(n()(),T._31(61,0,null,null,3,"button",[["block",""],["color","light"],["ion-button",""]],null,[[null,"click"]],function(n,l,u){var t=!0;if("click"===l){t=!1!==n.component.cancel()&&t}return t},dl.b,dl.a)),T._30(62,1097728,null,0,fl.a,[[8,""],Cn.a,T.t,T.V],{color:[0,"color"],block:[1,"block"]},null),(n()(),T._55(63,0,["",""])),T._47(131072,$n.a,[Sn.a,T.j]),(n()(),T._55(-1,null,["\n            "])),(n()(),T._55(-1,null,["\n        "])),(n()(),T._55(-1,null,["\n        "])),(n()(),T._26(16777216,null,null,1,null,m)),T._30(69,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,null,["\n    "])),(n()(),T._55(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,16,0,u.replyData.subject);n(l,19,0,"text",T._56(l,19,1,T._44(l,20).transform("addon.mod_forum.subject")));n(l,36,0,T._56(l,36,0,T._44(l,37).transform("addon.mod_forum.message")),u.messageControl,"mod_forum_reply_"+u.post.id,u.component,u.componentId);n(l,41,0,u.forum.id&&u.forum.maxattachments>0);n(l,53,0,"");n(l,62,0,"light","");n(l,69,0,u.replyData.isEditing)},function(n,l){var u=l.component;n(l,0,0,"addon-forum-reply-edit-form-"+u.uniqueId);n(l,12,0,T._56(l,12,0,T._44(l,13).transform("addon.mod_forum.subject")));n(l,15,0,T._44(l,18).ngClassUntouched,T._44(l,18).ngClassTouched,T._44(l,18).ngClassPristine,T._44(l,18).ngClassDirty,T._44(l,18).ngClassValid,T._44(l,18).ngClassInvalid,T._44(l,18).ngClassPending);n(l,32,0,T._56(l,32,0,T._44(l,33).transform("addon.mod_forum.message")));n(l,52,0,""==u.replyData.subject||null==u.replyData.message);n(l,54,0,T._56(l,54,0,T._44(l,55).transform("addon.mod_forum.posttoforum")));n(l,63,0,T._56(l,63,0,T._44(l,64).transform("core.cancel")))})}function g(n){return T._57(0,[T._47(0,Vl.a,[Ln.a,Sn.a,ll.a]),(n()(),T._31(1,0,null,null,28,"ion-card-header",[["no-padding",""],["text-wrap",""]],[[8,"id",0]],null,null,null,null)),T._30(2,16384,null,0,wl.a,[Cn.a,T.t,T.V],null,null),(n()(),T._55(-1,null,["\n    "])),(n()(),T._31(4,0,null,null,24,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,il.b,il.a)),T._30(5,1097728,null,3,rl.a,[sl.a,Cn.a,T.t,T.V,[2,cl.a]],null,null),T._52(335544320,1,{contentLabel:0}),T._52(603979776,2,{_buttons:1}),T._52(603979776,3,{_icons:1}),T._30(9,16384,null,0,_l.a,[],null,null),(n()(),T._55(-1,2,["\n        "])),(n()(),T._31(11,0,null,0,2,"ion-avatar",[["core-user-avatar",""],["item-start",""]],null,[[null,"click"]],function(n,l,u){var t=!0,o=n.component;if("click"===l){t=!1!==o.openUserProfile(o.post.userid)&&t}return t},Ll.b,Ll.a)),T._30(12,16384,null,0,El.a,[],null,null),T._30(13,770048,null,0,Tl.a,[Rn.a,H.a,K.a,$.a,q.a],{user:[0,"user"]},null),(n()(),T._55(-1,2,["\n        "])),(n()(),T._31(15,0,null,2,3,"h2",[],null,null,null,null,null)),(n()(),T._31(16,0,null,null,2,"span",[],[[2,"core-bold",null]],null,null,null,null)),(n()(),T._31(17,0,null,null,1,"core-format-text",[],null,null,null,null,null)),T._30(18,540672,null,0,xn.a,[T.t,H.a,Y.a,jn.a,Sn.a,Vn.a,K.a,wn.a,Ln.a,En.a,$.a,Tn.a,[2,Rn.a],[2,Mn.a],[2,B.a],Un.a,q.a],{text:[0,"text"]},null),(n()(),T._55(-1,2,["\n        "])),(n()(),T._31(20,0,null,2,7,"p",[],null,null,null,null,null)),(n()(),T._55(-1,null,["\n            "])),(n()(),T._26(16777216,null,null,1,null,t)),T._30(23,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,null,["\n            "])),(n()(),T._26(16777216,null,null,1,null,e)),T._30(26,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(27,null,["\n            ","\n        "])),(n()(),T._55(-1,2,["\n    "])),(n()(),T._55(-1,null,["\n"])),(n()(),T._55(-1,null,["\n"])),(n()(),T._31(31,0,null,null,11,"ion-card-content",[["padding-top",""]],null,null,null,null,null)),T._30(32,16384,null,0,Rl.a,[Cn.a,T.t,T.V],null,null),(n()(),T._55(-1,null,["\n    "])),(n()(),T._31(34,0,null,null,1,"core-format-text",[],null,null,null,null,null)),T._30(35,540672,null,0,xn.a,[T.t,H.a,Y.a,jn.a,Sn.a,Vn.a,K.a,wn.a,Ln.a,En.a,$.a,Tn.a,[2,Rn.a],[2,Mn.a],[2,B.a],Un.a,q.a],{text:[0,"text"],component:[1,"component"],componentId:[2,"componentId"]},null),(n()(),T._55(-1,null,["\n    "])),(n()(),T._31(37,0,null,null,4,"div",[["no-lines",""]],null,null,null,null,null)),(n()(),T._55(-1,null,["\n        "])),(n()(),T._26(16777216,null,null,1,null,r)),T._30(40,802816,null,0,Bn.j,[T._11,T._6,T.E],{ngForOf:[0,"ngForOf"]},null),(n()(),T._55(-1,null,["\n    "])),(n()(),T._55(-1,null,["\n"])),(n()(),T._55(-1,null,["\n"])),(n()(),T._26(16777216,null,null,1,null,s)),T._30(45,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,null,["\n"])),(n()(),T._26(16777216,null,null,1,null,c)),T._30(48,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,null,["\n"])),(n()(),T._26(16777216,null,null,1,null,_)),T._30(51,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,null,["\n"])),(n()(),T._26(16777216,null,null,1,null,d)),T._30(54,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,null,["\n"])),(n()(),T._26(16777216,null,null,1,null,p)),T._30(57,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,13,0,u.post);n(l,18,0,u.post.subject);n(l,23,0,!u.post.modified);n(l,26,0,u.post.modified);n(l,35,0,u.post.message,u.component,u.componentId);n(l,40,0,u.post.attachments);n(l,45,0,u.forum&&u.ratingInfo);n(l,48,0,u.forum&&u.ratingInfo);n(l,51,0,u.post.id&&u.post.canreply);n(l,54,0,!(u.post.id||u.replyData.isEditing&&u.replyData.replyingTo==u.post.parent));n(l,57,0,u.post.id&&!u.replyData.isEditing&&u.replyData.replyingTo==u.post.id||!u.post.id&&u.replyData.isEditing&&u.replyData.replyingTo==u.post.parent)},function(n,l){var u=l.component;n(l,1,0,T._34(1,"addon-mod_forum-post-",u.post.id,""));n(l,16,0,0==u.post.parent);n(l,27,0,u.post.userfullname)})}function h(n){return T._57(0,[(n()(),T._31(0,0,null,null,3,"ion-title",[],null,null,null,Pn.b,Pn.a)),T._30(1,49152,null,0,kn.a,[Cn.a,T.t,T.V,[2,On.a],[2,Dn.a]],null,null),(n()(),T._31(2,0,null,0,1,"core-format-text",[],null,null,null,null,null)),T._30(3,540672,null,0,xn.a,[T.t,H.a,Y.a,jn.a,Sn.a,Vn.a,K.a,wn.a,Ln.a,En.a,$.a,Tn.a,[2,Rn.a],[2,Mn.a],[2,B.a],Un.a,q.a],{text:[0,"text"]},null)],function(n,l){n(l,3,0,l.component.discussion.subject)},null)}function I(n){return T._57(0,[(n()(),T._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,u){var t=!0;if("action"===l){t=!1!==n.component.doRefresh(null,u)&&t}return t},An.b,An.a)),T._30(1,770048,null,0,Nn.a,[Fn.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),T._47(131072,$n.a,[Sn.a,T.j])],function(n,l){var u=l.component;n(l,1,0,T._56(l,1,0,T._44(l,2).transform("addon.mod_forum.refreshposts")),u.refreshIcon,!1,650)},null)}function b(n){return T._57(0,[(n()(),T._31(0,0,null,null,2,"core-context-menu-item",[],null,[[null,"action"]],function(n,l,u){var t=!0;if("action"===l){t=!1!==n.component.doRefresh(null,u,!0)&&t}return t},An.b,An.a)),T._30(1,770048,null,0,Nn.a,[Fn.a],{content:[0,"content"],iconAction:[1,"iconAction"],closeOnClick:[2,"closeOnClick"],priority:[3,"priority"]},{action:"action"}),T._47(131072,$n.a,[Sn.a,T.j])],function(n,l){var u=l.component;n(l,1,0,T._56(l,1,0,T._44(l,2).transform("core.settings.synchronizenow")),u.syncIcon,!1,550)},null)}function v(n){return T._57(0,[(n()(),T._31(0,0,null,null,7,"ion-card",[["class","core-warning-card"]],null,null,null,null,null)),T._30(1,16384,null,0,qn.a,[Cn.a,T.t,T.V],null,null),(n()(),T._55(-1,null,["\n            "])),(n()(),T._31(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(4,147456,null,0,Hn.a,[Cn.a,T.t,T.V],{name:[0,"name"]},null),(n()(),T._55(5,null,[" ","\n        "])),T._48(6,{$a:0}),T._47(131072,$n.a,[Sn.a,T.j])],function(n,l){n(l,4,0,"warning")},function(n,l){var u=l.component;n(l,3,0,T._44(l,4)._hidden);n(l,5,0,T._56(l,5,0,T._44(l,7).transform("core.hasdatatosync",n(l,6,0,u.discussionStr))))})}function y(n){return T._57(0,[(n()(),T._31(0,0,null,null,6,"ion-card",[["class","core-warning-card"]],null,null,null,null,null)),T._30(1,16384,null,0,qn.a,[Cn.a,T.t,T.V],null,null),(n()(),T._55(-1,null,["\n            "])),(n()(),T._31(3,0,null,null,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),T._30(4,147456,null,0,Hn.a,[Cn.a,T.t,T.V],{name:[0,"name"]},null),(n()(),T._55(5,null,[" ","\n        "])),T._47(131072,$n.a,[Sn.a,T.j])],function(n,l){n(l,4,0,"warning")},function(n,l){n(l,3,0,T._44(l,4)._hidden);n(l,5,0,T._56(l,5,0,T._44(l,6).transform("addon.mod_forum.discussionlocked")))})}function P(n){return T._57(0,[(n()(),T._31(0,0,null,null,5,"ion-card",[["class","highlight"],["margin-bottom",""]],null,null,null,null,null)),T._30(1,16384,null,0,qn.a,[Cn.a,T.t,T.V],null,null),(n()(),T._55(-1,null,["\n            "])),(n()(),T._31(3,0,null,null,1,"addon-mod-forum-post",[],null,[[null,"onPostChange"]],function(n,l,u){var t=!0;if("onPostChange"===l){t=!1!==n.component.postListChanged()&&t}return t},g,Al)),T._30(4,245760,null,0,Ml.a,[Rn.a,z.a,Ul.a,Y.a,jn.a,Sn.a,Q.a,Z.a,X.a,nn.a,[2,B.a],[2,Mn.a]],{post:[0,"post"],courseId:[1,"courseId"],discussionId:[2,"discussionId"],component:[3,"component"],componentId:[4,"componentId"],replyData:[5,"replyData"],originalData:[6,"originalData"],trackPosts:[7,"trackPosts"],forum:[8,"forum"],defaultSubject:[9,"defaultSubject"],ratingInfo:[10,"ratingInfo"]},{onPostChange:"onPostChange"}),(n()(),T._55(-1,null,["\n        "]))],function(n,l){var u=l.component;n(l,4,1,[u.discussion,u.courseId,u.discussionId,u.component,u.cmId,u.replyData,u.originalData,u.trackPosts,u.forum,u.defaultSubject,u.ratingInfo])},null)}function k(n){return T._57(0,[(n()(),T._31(0,0,null,null,5,"ion-item-divider",[["class","item item-divider"]],null,null,null,il.b,il.a)),T._30(1,1097728,null,3,rl.a,[sl.a,Cn.a,T.t,T.V,[2,cl.a]],null,null),T._52(335544320,4,{contentLabel:0}),T._52(603979776,5,{_buttons:1}),T._52(603979776,6,{_icons:1}),T._30(5,16384,null,0,Nl.a,[Cn.a,T.t,T.V],null,null)],null,null)}function C(n){return T._57(0,[(n()(),T._31(0,0,null,null,7,null,null,null,null,null,null,null)),(n()(),T._55(-1,null,["\n                "])),(n()(),T._26(16777216,null,null,1,null,k)),T._30(3,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,null,["\n                "])),(n()(),T._31(5,0,null,null,1,"addon-mod-forum-post",[],null,[[null,"onPostChange"]],function(n,l,u){var t=!0;if("onPostChange"===l){t=!1!==n.component.postListChanged()&&t}return t},g,Al)),T._30(6,245760,null,0,Ml.a,[Rn.a,z.a,Ul.a,Y.a,jn.a,Sn.a,Q.a,Z.a,X.a,nn.a,[2,B.a],[2,Mn.a]],{post:[0,"post"],courseId:[1,"courseId"],discussionId:[2,"discussionId"],component:[3,"component"],componentId:[4,"componentId"],replyData:[5,"replyData"],originalData:[6,"originalData"],trackPosts:[7,"trackPosts"],forum:[8,"forum"],defaultSubject:[9,"defaultSubject"],ratingInfo:[10,"ratingInfo"]},{onPostChange:"onPostChange"}),(n()(),T._55(-1,null,["\n            "]))],function(n,l){var u=l.component;n(l,3,0,!l.context.first);n(l,6,1,[l.context.$implicit,u.courseId,u.discussionId,u.component,u.cmId,u.replyData,u.originalData,u.trackPosts,u.forum,u.defaultSubject,u.ratingInfo])},null)}function O(n){return T._57(0,[(n()(),T._31(0,0,null,null,5,"ion-card",[],null,null,null,null,null)),T._30(1,16384,null,0,qn.a,[Cn.a,T.t,T.V],null,null),(n()(),T._55(-1,null,["\n            "])),(n()(),T._26(16777216,null,null,1,null,C)),T._30(4,802816,null,0,Bn.j,[T._11,T._6,T.E],{ngForOf:[0,"ngForOf"]},null),(n()(),T._55(-1,null,["\n        "]))],function(n,l){n(l,4,0,l.component.posts)},null)}function D(n){return T._57(0,[(n()(),T._31(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function x(n){return T._57(0,[(n()(),T._31(0,0,null,null,5,null,null,null,null,null,null,null)),(n()(),T._55(-1,null,["\n                "])),(n()(),T._26(16777216,null,null,2,null,D)),T._30(3,540672,null,0,Bn.r,[T._11],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),T._48(4,{post:0}),(n()(),T._55(-1,null,["\n            "]))],function(n,l){n(l,3,0,n(l,4,0,l.context.$implicit),T._44(l.parent.parent,76))},null)}function j(n){return T._57(0,[(n()(),T._31(0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),T._55(-1,null,["\n            "])),(n()(),T._26(16777216,null,null,1,null,x)),T._30(3,802816,null,0,Bn.j,[T._11,T._6,T.E],{ngForOf:[0,"ngForOf"]},null),(n()(),T._55(-1,null,["\n        "]))],function(n,l){n(l,3,0,l.component.posts)},null)}function S(n){return T._57(0,[(n()(),T._31(0,0,null,null,0,null,null,null,null,null,null,null))],null,null)}function V(n){return T._57(0,[(n()(),T._31(0,0,null,null,5,null,null,null,null,null,null,null)),(n()(),T._55(-1,null,["\n                    "])),(n()(),T._26(16777216,null,null,2,null,S)),T._30(3,540672,null,0,Bn.r,[T._11],{ngTemplateOutletContext:[0,"ngTemplateOutletContext"],ngTemplateOutlet:[1,"ngTemplateOutlet"]},null),T._48(4,{post:0}),(n()(),T._55(-1,null,["\n                "]))],function(n,l){n(l,3,0,n(l,4,0,l.context.$implicit),T._44(l.parent.parent.parent,76))},null)}function w(n){return T._57(0,[(n()(),T._31(0,0,null,null,4,"div",[["padding-left",""]],null,null,null,null,null)),(n()(),T._55(-1,null,["\n                "])),(n()(),T._26(16777216,null,null,1,null,V)),T._30(3,802816,null,0,Bn.j,[T._11,T._6,T.E],{ngForOf:[0,"ngForOf"]},null),(n()(),T._55(-1,null,["\n            "]))],function(n,l){n(l,3,0,l.parent.context.post.children)},null)}function L(n){return T._57(0,[(n()(),T._55(-1,null,["\n            "])),(n()(),T._31(1,0,null,null,5,"ion-card",[],null,null,null,null,null)),T._30(2,16384,null,0,qn.a,[Cn.a,T.t,T.V],null,null),(n()(),T._55(-1,null,["\n                "])),(n()(),T._31(4,0,null,null,1,"addon-mod-forum-post",[],null,[[null,"onPostChange"]],function(n,l,u){var t=!0;if("onPostChange"===l){t=!1!==n.component.postListChanged()&&t}return t},g,Al)),T._30(5,245760,null,0,Ml.a,[Rn.a,z.a,Ul.a,Y.a,jn.a,Sn.a,Q.a,Z.a,X.a,nn.a,[2,B.a],[2,Mn.a]],{post:[0,"post"],courseId:[1,"courseId"],discussionId:[2,"discussionId"],component:[3,"component"],componentId:[4,"componentId"],replyData:[5,"replyData"],originalData:[6,"originalData"],trackPosts:[7,"trackPosts"],forum:[8,"forum"],defaultSubject:[9,"defaultSubject"],ratingInfo:[10,"ratingInfo"]},{onPostChange:"onPostChange"}),(n()(),T._55(-1,null,["\n            "])),(n()(),T._55(-1,null,["\n            "])),(n()(),T._26(16777216,null,null,1,null,w)),T._30(9,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,null,["\n        "]))],function(n,l){var u=l.component;n(l,5,1,[l.context.post,u.courseId,u.discussionId,u.component,u.cmId,u.replyData,u.originalData,u.trackPosts,u.forum,u.defaultSubject,u.ratingInfo]);n(l,9,0,l.context.post.children.length&&l.context.post.children[0].subject)},null)}function E(n){return T._57(0,[T._52(402653184,1,{content:0}),(n()(),T._31(1,0,null,null,16,"ion-header",[],null,null,null,null,null)),T._30(2,16384,null,0,Fl.a,[Cn.a,T.t,T.V,[2,$l.a]],null,null),(n()(),T._55(-1,null,["\n    "])),(n()(),T._31(4,0,null,null,12,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,ql.b,ql.a)),T._30(5,49152,null,0,Dn.a,[Dl.a,[2,$l.a],[2,Rn.a],Cn.a,T.t,T.V],null,null),T._30(6,212992,null,0,Hl.a,[Dn.a,Vn.a,Sn.a,q.a],null,null),(n()(),T._55(-1,3,["\n        "])),(n()(),T._26(16777216,null,3,1,null,h)),T._30(9,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,3,["\n        "])),(n()(),T._31(11,0,null,2,4,"ion-buttons",[["end",""]],null,null,null,null,null)),T._30(12,16384,null,1,Yl.a,[Cn.a,T.t,T.V,[2,On.a],[2,Dn.a]],null,null),T._52(603979776,2,{_buttons:1}),(n()(),T._55(-1,null,["\n            "])),(n()(),T._55(-1,null,["\n        "])),(n()(),T._55(-1,3,["\n    "])),(n()(),T._55(-1,null,["\n"])),(n()(),T._55(-1,null,["\n"])),(n()(),T._31(19,0,null,null,25,"core-navbar-buttons",[["end",""]],null,null,null,Kl.b,Kl.a)),T._30(20,245760,null,1,zl.a,[T.t,Ln.a,Y.a],null,null),T._52(603979776,3,{buttons:1}),(n()(),T._55(-1,0,["\n    "])),(n()(),T._31(23,0,null,0,20,"core-context-menu",[],null,null,null,Bl.b,Bl.a)),T._30(24,245760,null,0,Fn.a,[Sn.a,Gl.a,T.t,Y.a,[2,Wl.a],K.a],null,null),(n()(),T._55(-1,0,["\n        "])),(n()(),T._26(16777216,null,0,1,null,I)),T._30(27,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,0,["\n        "])),(n()(),T._26(16777216,null,0,1,null,b)),T._30(30,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,0,["\n        "])),(n()(),T._31(32,0,null,0,2,"core-context-menu-item",[["iconAction","arrow-round-down"]],null,[[null,"action"]],function(n,l,u){var t=!0;if("action"===l){t=!1!==n.component.changeSort("flat-oldest")&&t}return t},An.b,An.a)),T._30(33,770048,null,0,Nn.a,[Fn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),T._47(131072,$n.a,[Sn.a,T.j]),(n()(),T._55(-1,0,["\n        "])),(n()(),T._31(36,0,null,0,2,"core-context-menu-item",[["iconAction","arrow-round-up"]],null,[[null,"action"]],function(n,l,u){var t=!0;if("action"===l){t=!1!==n.component.changeSort("flat-newest")&&t}return t},An.b,An.a)),T._30(37,770048,null,0,Nn.a,[Fn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),T._47(131072,$n.a,[Sn.a,T.j]),(n()(),T._55(-1,0,["\n        "])),(n()(),T._31(40,0,null,0,2,"core-context-menu-item",[["iconAction","swap"]],null,[[null,"action"]],function(n,l,u){var t=!0;if("action"===l){t=!1!==n.component.changeSort("nested")&&t}return t},An.b,An.a)),T._30(41,770048,null,0,Nn.a,[Fn.a],{content:[0,"content"],iconAction:[1,"iconAction"],priority:[2,"priority"],hidden:[3,"hidden"]},{action:"action"}),T._47(131072,$n.a,[Sn.a,T.j]),(n()(),T._55(-1,0,["\n    "])),(n()(),T._55(-1,0,["\n"])),(n()(),T._55(-1,null,["\n"])),(n()(),T._31(46,0,null,null,32,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Jl.b,Jl.a)),T._30(47,4374528,[[1,4]],0,Mn.a,[Cn.a,Vn.a,yl.a,T.t,T.V,Dl.a,Ql.a,T.M,[2,$l.a],[2,Rn.a]],null,null),(n()(),T._55(-1,1,["\n    "])),(n()(),T._31(49,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,u){var t=!0;if("ionRefresh"===l){t=!1!==n.component.doRefresh(u)&&t}return t},null,null)),T._30(50,212992,null,0,Xl.a,[Vn.a,Mn.a,T.M,vl.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),T._55(-1,null,["\n        "])),(n()(),T._31(52,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,Zl.b,Zl.a)),T._30(53,114688,null,0,nu.a,[Xl.a,Cn.a],{pullingText:[0,"pullingText"]},null),T._47(131072,$n.a,[Sn.a,T.j]),(n()(),T._55(-1,null,["\n    "])),(n()(),T._55(-1,1,["\n\n    "])),(n()(),T._31(57,0,null,1,20,"core-loading",[],null,null,null,lu.b,lu.a)),T._30(58,638976,null,0,uu.a,[Sn.a,T.t,q.a,K.a],{hideUntil:[0,"hideUntil"]},null),(n()(),T._55(-1,0,["\n        "])),(n()(),T._55(-1,0,["\n        "])),(n()(),T._26(16777216,null,0,1,null,v)),T._30(62,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,0,["\n\n        "])),(n()(),T._26(16777216,null,0,1,null,y)),T._30(65,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,0,["\n\n        "])),(n()(),T._26(16777216,null,0,1,null,P)),T._30(68,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,0,["\n\n        "])),(n()(),T._26(16777216,null,0,1,null,O)),T._30(71,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,0,["\n\n        "])),(n()(),T._26(16777216,null,0,1,null,j)),T._30(74,16384,null,0,Bn.k,[T._11,T._6],{ngIf:[0,"ngIf"]},null),(n()(),T._55(-1,0,["\n\n        "])),(n()(),T._26(0,[["nestedPosts",2]],0,0,null,L)),(n()(),T._55(-1,0,["\n    "])),(n()(),T._55(-1,1,["\n"])),(n()(),T._55(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,6,0);n(l,9,0,u.discussion),n(l,20,0),n(l,24,0);n(l,27,0,u.discussionLoaded&&!u.postHasOffline&&u.isOnline);n(l,30,0,u.discussionLoaded&&!u.isSplitViewOn&&u.postHasOffline&&u.isOnline);n(l,33,0,T._56(l,33,0,T._44(l,34).transform("addon.mod_forum.modeflatoldestfirst")),"arrow-round-down",500,"flat-oldest"==u.sort);n(l,37,0,T._56(l,37,0,T._44(l,38).transform("addon.mod_forum.modeflatnewestfirst")),"arrow-round-up",450,"flat-newest"==u.sort);n(l,41,0,T._56(l,41,0,T._44(l,42).transform("addon.mod_forum.modenested")),"swap",400,"nested"==u.sort);n(l,50,0,u.discussionLoaded);n(l,53,0,T._34(1,"",T._56(l,53,0,T._44(l,54).transform("core.pulltorefresh")),""));n(l,58,0,u.discussionLoaded);n(l,62,0,u.postHasOffline||u.hasOfflineRatings);n(l,65,0,u.locked);n(l,68,0,u.discussion);n(l,71,0,"nested"!=u.sort);n(l,74,0,"nested"==u.sort)},function(n,l){n(l,4,0,T._44(l,5)._hidden,T._44(l,5)._sbPadding);n(l,46,0,T._44(l,47).statusbarPadding,T._44(l,47)._hasRefresher);n(l,49,0,"inactive"!==T._44(l,50).state,T._44(l,50)._top);n(l,52,0,T._44(l,53).r.state)})}Object.defineProperty(l,"__esModule",{value:!0});var T=u(0),R=u(8),M=u(3),U=u(24),A=u(29),N=u(690),F=u(197),$=u(9),q=u(12),H=u(1),Y=u(4),K=u(2),z=u(66),B=u(34),G=u(170),W=u(166),J=u(216),Q=u(153),X=u(211),Z=u(261),nn=u(262),ln=this&&this.__decorate||function(n,l,u,t){var o,e=arguments.length,a=e<3?l:null===t?t=Object.getOwnPropertyDescriptor(l,u):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,l,u,t);else for(var i=n.length-1;i>=0;i--)(o=n[i])&&(a=(e<3?o(a):e>3?o(l,u,a):o(l,u))||a);return e>3&&a&&Object.defineProperty(l,u,a),a},un=this&&this.__metadata||function(n,l){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,l)},tn=this&&this.__param||function(n,l){return function(u,t){l(u,t,n)}},on=function(){function n(n,l,u,t,o,e,a,i,r,s,c,_,d,f,m,p){var g=this;this.appProvider=t,this.eventsProvider=o,this.sitesProvider=e,this.domUtils=a,this.utils=i,this.translate=r,this.uploaderProvider=s,this.forumProvider=c,this.forumOffline=_,this.forumHelper=d,this.forumSync=f,this.ratingOffline=m,this.svComponent=p,this.discussionLoaded=!1,this.sort="flat-oldest",this.replyData={replyingTo:0,isEditing:!1,subject:"",message:null,files:[]},this.originalData={subject:null,message:null,files:[]},this.refreshIcon="spinner",this.syncIcon="spinner",this.discussionStr="",this.component=Q.a.COMPONENT,this.courseId=n.get("courseId"),this.cmId=n.get("cmId"),this.forumId=n.get("forumId"),this.discussionId=n.get("discussionId"),this.trackPosts=n.get("trackPosts"),this.locked=n.get("locked"),this.postId=n.get("postId"),this.isOnline=this.appProvider.isOnline(),this.onlineObserver=l.onchange().subscribe(function(n){u.run(function(){g.isOnline=g.appProvider.isOnline()})}),this.isSplitViewOn=this.svComponent&&this.svComponent.isOn(),this.discussionStr=r.instant("addon.mod_forum.discussion")}return n.prototype.ionViewDidLoad=function(){var n=this;this.fetchPosts(!0,!1,!0).then(function(){n.postId&&setTimeout(function(){n.domUtils.scrollToElementBySelector(n.content,"#addon-mod_forum-post-"+n.postId)})})},n.prototype.ionViewDidEnter=function(){var n=this;this.syncObserver=this.eventsProvider.on(nn.a.AUTO_SYNCED,function(l){l.forumId==n.forumId&&n.discussionId==l.discussionId&&l.userId==n.sitesProvider.getCurrentSiteUserId()&&(n.discussionLoaded=!1,n.refreshPosts())},this.sitesProvider.getCurrentSiteId()),this.syncManualObserver=this.eventsProvider.on(nn.a.MANUAL_SYNCED,function(l){"discussion"!=l.source&&l.forumId==n.forumId&&l.userId==n.sitesProvider.getCurrentSiteUserId()&&(n.discussionLoaded=!1,n.refreshPosts())},this.sitesProvider.getCurrentSiteId()),this.eventsProvider.trigger(Q.a.VIEW_DISCUSSION_EVENT,{forumId:this.forumId,discussion:this.discussionId},this.sitesProvider.getCurrentSiteId()),this.ratingOfflineObserver=this.eventsProvider.on(G.a.RATING_SAVED_EVENT,function(l){"mod_forum"==l.component&&"post"==l.ratingArea&&"module"==l.contextLevel&&l.instanceId==n.cmId&&l.itemSetId==n.discussionId&&(n.hasOfflineRatings=!0)}),this.ratingSyncObserver=this.eventsProvider.on(J.a.SYNCED_EVENT,function(l){"mod_forum"==l.component&&"post"==l.ratingArea&&"module"==l.contextLevel&&l.instanceId==n.cmId&&l.itemSetId==n.discussionId&&(n.hasOfflineRatings=!1)})},n.prototype.ionViewCanLeave=function(){var n=this;return(this.forumHelper.hasPostDataChanged(this.replyData,this.originalData)?this.domUtils.showConfirm(this.translate.instant("core.confirmcanceledit")):Promise.resolve()).then(function(){n.uploaderProvider.clearTmpFiles(n.replyData.files)})},n.prototype.fetchForum=function(){return this.courseId&&this.cmId?this.forumProvider.getForum(this.courseId,this.cmId):this.courseId&&this.forumId?this.forumProvider.getForumById(this.courseId,this.forumId):Promise.reject(null)},n.prototype.fetchPosts=function(n,l,u){var t=this,o=[],e=[],a=!1;return(n?this.syncDiscussion(l).catch(function(){}):Promise.resolve()).then(function(){return t.forumProvider.getDiscussionPosts(t.discussionId).then(function(n){o=n.posts,t.ratingInfo=n.ratinginfo}).then(function(){return t.forumOffline.getDiscussionReplies(t.discussionId).then(function(n){t.postHasOffline=!!n.length;var l=[],u={};return o.forEach(function(n){u[n.id]=n,a=a||!n.postread}),n.forEach(function(n){t.forumId||(t.forumId=n.forumid),t.courseId||(t.courseId=n.courseid),l.push(t.forumHelper.convertOfflineReplyToOnline(n).then(function(n){e.push(n),u[n.parent].canreply=!1}))}),Promise.all(l).then(function(){o=t.utils.objectToArray(u)})})})}).then(function(){var n=e.concat(o);if(t.discussion=t.forumProvider.extractStartingPost(n),!t.discussion)return Promise.reject("Invalid forum discussion");if("nested"==t.sort)t.forumProvider.sortDiscussionPosts(n,"ASC"),t.posts=t.utils.formatTree(n,"parent","id",t.discussion.id);else{t.forumProvider.sortDiscussionPosts(n,"flat-newest"==t.sort?"DESC":"ASC"),t.posts=n}return t.defaultSubject=t.translate.instant("addon.mod_forum.re")+" "+t.discussion.subject,t.replyData.subject=t.defaultSubject,t.fetchForum().then(function(n){t.discussion.userfullname&&0==t.discussion.parent&&"single"==n.type&&(t.discussion.userfullname=null),void 0!==n.istracked&&(t.trackPosts=n.istracked),t.forumId=n.id,t.cmId=n.cmid,t.forum=n}).catch(function(){t.forum={}})}).then(function(){return t.ratingOffline.hasRatings("mod_forum","post","module",t.cmId,t.discussionId).then(function(n){t.hasOfflineRatings=n})}).catch(function(n){t.domUtils.showErrorModal(n)}).finally(function(){t.discussionLoaded=!0,t.refreshIcon="refresh",t.syncIcon="sync",(u||a&&t.trackPosts)&&t.forumProvider.logDiscussionView(t.discussionId,t.forumId||-1).catch(function(){}).finally(function(){t.eventsProvider.trigger(Q.a.MARK_READ_EVENT,{courseId:t.courseId,moduleId:t.cmId},t.sitesProvider.getCurrentSiteId())})})},n.prototype.syncDiscussion=function(n){var l=this,u=[];return u.push(this.forumSync.syncDiscussionReplies(this.discussionId).then(function(n){return n.warnings&&n.warnings.length&&l.domUtils.showErrorModal(n.warnings[0]),n&&n.updated&&l.eventsProvider.trigger(nn.a.MANUAL_SYNCED,{forumId:l.forumId,userId:l.sitesProvider.getCurrentSiteUserId(),source:"discussion"},l.sitesProvider.getCurrentSiteId()),n.updated})),u.push(this.forumSync.syncRatings(this.cmId,this.discussionId).then(function(n){n.warnings&&n.warnings.length&&l.domUtils.showErrorModal(n.warnings[0])})),Promise.all(u).catch(function(u){return n&&l.domUtils.showErrorModalDefault(u,"core.errorsync",!0),Promise.reject(null)})},n.prototype.doRefresh=function(n,l,u){return void 0===u&&(u=!1),this.discussionLoaded?this.refreshPosts(!0,u).finally(function(){n&&n.complete(),l&&l()}):Promise.resolve()},n.prototype.refreshPosts=function(n,l){var u=this;return this.domUtils.scrollToTop(this.content),this.refreshIcon="spinner",this.syncIcon="spinner",this.forumProvider.invalidateDiscussionPosts(this.discussionId).catch(function(){}).then(function(){return u.fetchPosts(n,l)})},n.prototype.changeSort=function(n){return this.discussionLoaded=!1,this.sort=n,this.domUtils.scrollToTop(this.content),this.fetchPosts()},n.prototype.postListChanged=function(){var n=this;this.eventsProvider.trigger(Q.a.REPLY_DISCUSSION_EVENT,{forumId:this.forumId,discussionId:this.discussionId,cmId:this.cmId},this.sitesProvider.getCurrentSiteId()),this.discussionLoaded=!1,this.refreshPosts().finally(function(){n.discussionLoaded=!0})},n.prototype.ionViewWillLeave=function(){this.syncObserver&&this.syncObserver.off(),this.syncManualObserver&&this.syncManualObserver.off(),this.ratingOfflineObserver&&this.ratingOfflineObserver.off(),this.ratingSyncObserver&&this.ratingSyncObserver.off()},n.prototype.ngOnDestroy=function(){this.onlineObserver&&this.onlineObserver.unsubscribe()},ln([Object(T._9)(R.f),un("design:type",R.f)],n.prototype,"content",void 0),n=ln([Object(T.m)({selector:"page-addon-mod-forum-discussion",templateUrl:"discussion.html"}),tn(15,Object(T.N)()),un("design:paramtypes",[R.t,F.a,T.M,$.a,q.a,H.a,Y.a,K.a,M.c,z.a,Q.a,X.a,Z.a,nn.a,W.a,B.a])],n)}(),en=this&&this.__decorate||function(n,l,u,t){var o,e=arguments.length,a=e<3?l:null===t?t=Object.getOwnPropertyDescriptor(l,u):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,l,u,t);else for(var i=n.length-1;i>=0;i--)(o=n[i])&&(a=(e<3?o(a):e>3?o(l,u,a):o(l,u))||a);return e>3&&a&&Object.defineProperty(l,u,a),a},an=function(){function n(){}return n=en([Object(T.I)({declarations:[on],imports:[U.a,A.a,N.a,R.l.forChild(on),M.b.forChild()]})],n)}(),rn=u(1365),sn=u(1366),cn=u(1367),_n=u(1368),dn=u(1369),fn=u(1370),mn=u(1371),pn=u(1372),gn=u(1373),hn=u(1376),In=u(1377),bn=u(1378),vn=u(1379),yn=u(1412),Pn=u(1375),kn=u(350),Cn=u(6),On=u(253),Dn=u(206),xn=u(41),jn=u(10),Sn=u(18),Vn=u(14),wn=u(26),Ln=u(5),En=u(16),Tn=u(17),Rn=u(22),Mn=u(25),Un=u(36),An=u(82),Nn=u(74),Fn=u(70),$n=u(27),qn=u(79),Hn=u(45),Yn=u(208),Kn=u(112),zn=u(95),Bn=u(7),Gn=u(195),Wn=u(163),Jn=u(128),Qn=u(64),Xn=u(360),Zn=u(263),nl=u(51),ll=u(23),ul=u(1992),tl=u(1387),ol=u(1993),el=u(1386),al=u(181),il=u(30),rl=u(20),sl=u(19),cl=u(28),_l=u(33),dl=u(46),fl=u(43),ml=u(459),pl=u(289),gl=u(134),hl=u(114),Il=u(113),bl=u(87),vl=u(38),yl=u(31),Pl=u(60),kl=u(96),Cl=u(21),Ol=u(80),Dl=u(32),xl=u(285),jl=u(233),Sl=u(142),Vl=u(287),wl=u(290),Ll=u(207),El=u(179),Tl=u(180),Rl=u(361),Ml=u(1422),Ul=u(78),Al=T._29({encapsulation:2,styles:[],data:{}}),Nl=(T._27("addon-mod-forum-post",Ml.a,function(n){return T._57(0,[(n()(),T._31(0,0,null,null,1,"addon-mod-forum-post",[],null,null,null,g,Al)),T._30(1,245760,null,0,Ml.a,[Rn.a,z.a,Ul.a,Y.a,jn.a,Sn.a,Q.a,Z.a,X.a,nn.a,[2,B.a],[2,Mn.a]],null,null)],function(n,l){n(l,1,0)},null)},{post:"post",courseId:"courseId",discussionId:"discussionId",component:"component",componentId:"componentId",replyData:"replyData",originalData:"originalData",trackPosts:"trackPosts",forum:"forum",defaultSubject:"defaultSubject",ratingInfo:"ratingInfo"},{onPostChange:"onPostChange"},[]),u(111)),Fl=u(447),$l=u(37),ql=u(1374),Hl=u(676),Yl=u(448),Kl=u(89),zl=u(83),Bl=u(81),Gl=u(65),Wl=u(69),Jl=u(178),Ql=u(104),Xl=u(140),Zl=u(194),nu=u(146),lu=u(49),uu=u(48),tu=u(63),ou=T._29({encapsulation:2,styles:[],data:{}}),eu=T._27("page-addon-mod-forum-discussion",on,function(n){return T._57(0,[(n()(),T._31(0,0,null,null,1,"page-addon-mod-forum-discussion",[],null,null,null,E,ou)),T._30(1,180224,null,0,on,[tu.a,F.a,T.M,$.a,q.a,H.a,Y.a,K.a,Sn.a,z.a,Q.a,X.a,Z.a,nn.a,W.a,[2,B.a]],null,null)],null,null)},{},{},[]),au=u(346),iu=u(347),ru=u(349),su=u(348),cu=u(446),_u=u(675),du=u(103),fu=u(67),mu=u(684),pu=u(254);u.d(l,"AddonModForumDiscussionPageModuleNgFactory",function(){return gu});var gu=T._28(an,[],function(n){return T._40([T._41(512,T.o,T._21,[[8,[rn.a,sn.a,cn.a,_n.a,dn.a,fn.a,mn.a,pn.a,gn.a,hn.a,In.a,bn.a,vn.a,yn.a,eu]],[3,T.o],T.K]),T._41(4608,Bn.m,Bn.l,[T.G,[2,Bn.v]]),T._41(4608,Cl.x,Cl.x,[]),T._41(4608,Cl.d,Cl.d,[]),T._41(4608,au.b,au.a,[]),T._41(4608,iu.a,iu.b,[]),T._41(4608,ru.b,ru.a,[]),T._41(4608,su.b,su.a,[]),T._41(4608,Sn.a,Sn.a,[cu.a,au.b,iu.a,ru.b,su.b,Sn.b,Sn.c]),T._41(512,Bn.b,Bn.b,[]),T._41(512,Cl.v,Cl.v,[]),T._41(512,Cl.i,Cl.i,[]),T._41(512,Cl.s,Cl.s,[]),T._41(512,_u.a,_u.a,[]),T._41(512,M.b,M.b,[]),T._41(512,A.a,A.a,[]),T._41(512,du.a,du.a,[]),T._41(512,U.a,U.a,[]),T._41(512,fu.a,fu.a,[]),T._41(512,mu.a,mu.a,[]),T._41(512,N.a,N.a,[]),T._41(512,_u.b,_u.b,[]),T._41(512,an,an,[]),T._41(256,Sn.c,void 0,[]),T._41(256,Sn.b,void 0,[]),T._41(256,pu.a,on,[])])})},1992:function(n,l,u){"use strict";function t(n){return a._57(0,[(n()(),a._31(0,0,null,null,2,"ion-option",[],null,null,null,null,null)),a._30(1,16384,[[4,4]],0,i.a,[a.t],{value:[0,"value"]},null),(n()(),a._55(2,null,["",""]))],function(n,l){n(l,1,0,l.context.$implicit.value)},function(n,l){n(l,2,0,l.context.$implicit.name)})}function o(n){return a._57(0,[(n()(),a._31(0,0,null,null,23,"ion-item",[["class","item item-block"],["text-wrap",""]],null,null,null,r.b,r.a)),a._30(1,1097728,null,3,s.a,[c.a,_.a,a.t,a.V,[2,d.a]],null,null),a._52(335544320,1,{contentLabel:0}),a._52(603979776,2,{_buttons:1}),a._52(603979776,3,{_icons:1}),a._30(5,16384,null,0,f.a,[],null,null),(n()(),a._55(-1,2,["\n    "])),(n()(),a._31(7,0,null,1,3,"ion-label",[],null,null,null,null,null)),a._30(8,16384,[[1,4]],0,m.a,[_.a,a.t,a.V,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),a._55(9,null,["",""])),a._47(131072,p.a,[g.a,a.j]),(n()(),a._55(-1,2,["\n    "])),(n()(),a._31(12,0,null,3,10,"ion-select",[["interface","action-sheet"],["text-start",""]],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(n,l,u){var t=!0,o=n.component;if("click"===l){t=!1!==a._44(n,13)._click(u)&&t}if("keyup.space"===l){t=!1!==a._44(n,13)._keyup()&&t}if("ngModelChange"===l){t=!1!==(o.rating=u)&&t}if("ngModelChange"===l){t=!1!==o.userRatingChanged()&&t}return t},h.b,h.a)),a._30(13,1228800,null,1,I.a,[b.a,c.a,_.a,a.t,a.V,[2,s.a],v.a],{disabled:[0,"disabled"],interface:[1,"interface"]},null),a._52(603979776,4,{options:1}),a._50(1024,null,y.l,function(n){return[n]},[I.a]),a._30(16,671744,null,0,y.q,[[8,null],[8,null],[8,null],[2,y.l]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),a._50(2048,null,y.m,null,[y.q]),a._30(18,16384,null,0,y.n,[y.m],null,null),(n()(),a._55(-1,null,["\n        "])),(n()(),a._26(16777216,null,null,1,null,t)),a._30(21,802816,null,0,P.j,[a._11,a._6,a.E],{ngForOf:[0,"ngForOf"]},null),(n()(),a._55(-1,null,["\n    "])),(n()(),a._55(-1,2,["\n"]))],function(n,l){var u=l.component;n(l,13,0,!u.item.canrate,"action-sheet");n(l,16,0,!u.item.canrate,u.rating);n(l,21,0,u.scale.items)},function(n,l){n(l,9,0,a._56(l,9,0,a._44(l,10).transform("core.rating.rating")));n(l,12,0,a._44(l,13)._disabled,a._44(l,18).ngClassUntouched,a._44(l,18).ngClassTouched,a._44(l,18).ngClassPristine,a._44(l,18).ngClassDirty,a._44(l,18).ngClassValid,a._44(l,18).ngClassInvalid,a._44(l,18).ngClassPending)})}function e(n){return a._57(0,[(n()(),a._26(16777216,null,null,1,null,o)),a._30(1,16384,null,0,P.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(n()(),a._55(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,1,0,u.item&&(u.item.canrate||null!=u.item.rating))},null)}u.d(l,"a",function(){return x}),l.b=e;var a=u(0),i=u(93),r=u(30),s=u(20),c=u(19),_=u(6),d=u(28),f=u(33),m=u(60),p=u(27),g=u(18),h=u(115),I=u(94),b=u(32),v=u(52),y=u(21),P=u(7),k=u(1387),C=u(4),O=u(170),D=u(166),x=a._29({encapsulation:2,styles:[],data:{}});a._27("core-rating-rate",k.a,function(n){return a._57(0,[(n()(),a._31(0,0,null,null,1,"core-rating-rate",[],null,null,null,e,x)),a._30(1,573440,null,0,k.a,[C.a,g.a,O.a,D.a],null,null)],null,null)},{ratingInfo:"ratingInfo",contextLevel:"contextLevel",instanceId:"instanceId",itemId:"itemId",itemSetId:"itemSetId",courseId:"courseId",aggregateMethod:"aggregateMethod",scaleId:"scaleId",userId:"userId"},{onUpdate:"onUpdate"},[])},1993:function(n,l,u){"use strict";function t(n){return a._57(0,[(n()(),a._31(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),a._55(1,null,["(",")"]))],null,function(n,l){n(l,1,0,l.component.item.count)})}function o(n){return a._57(0,[(n()(),a._31(0,0,null,null,11,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[1,"detail-none",0]],[[null,"click"]],function(n,l,u){var t=!0;if("click"===l){t=!1!==n.component.openRatings()&&t}return t},i.b,i.a)),a._30(1,1097728,null,3,r.a,[s.a,c.a,a.t,a.V,[2,_.a]],null,null),a._52(335544320,1,{contentLabel:0}),a._52(603979776,2,{_buttons:1}),a._52(603979776,3,{_icons:1}),a._30(5,16384,null,0,d.a,[],null,null),(n()(),a._55(6,2,["\n    ",""," ","\n    "])),a._47(131072,f.a,[m.a,a.j]),a._47(131072,f.a,[m.a,a.j]),(n()(),a._26(16777216,null,2,1,null,t)),a._30(10,16384,null,0,p.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(n()(),a._55(-1,2,["\n"]))],function(n,l){var u=l.component;n(l,10,0,u.showCount&&u.item.count>0)},function(n,l){var u=l.component;n(l,0,0,!u.ratingInfo.canviewall||!u.item.count||null);n(l,6,0,a._56(l,6,0,a._44(l,7).transform(u.labelKey)),a._56(l,6,1,a._44(l,8).transform("core.labelsep")),u.item.aggregatestr||"-")})}function e(n){return a._57(0,[(n()(),a._26(16777216,null,null,1,null,o)),a._30(1,16384,null,0,p.k,[a._11,a._6],{ngIf:[0,"ngIf"]},null),(n()(),a._55(-1,null,["\n"]))],function(n,l){var u=l.component;n(l,1,0,u.item&&u.item.canviewaggregate&&u.labelKey)},null)}u.d(l,"a",function(){return b}),l.b=e;var a=u(0),i=u(30),r=u(20),s=u(19),c=u(6),_=u(28),d=u(33),f=u(27),m=u(18),p=u(7),g=u(1386),h=u(12),I=u(181),b=a._29({encapsulation:2,styles:[],data:{}});a._27("core-rating-aggregate",g.a,function(n){return a._57(0,[(n()(),a._31(0,0,null,null,1,"core-rating-aggregate",[],null,null,null,e,b)),a._30(1,704512,null,0,g.a,[h.a,I.a],null,null)],null,null)},{ratingInfo:"ratingInfo",contextLevel:"contextLevel",instanceId:"instanceId",itemId:"itemId",aggregateMethod:"aggregateMethod",scaleId:"scaleId",courseId:"courseId"},{},[])}});