webpackJsonp([43],{1931:function(l,n,t){"use strict";function e(l){return r._57(0,[(l()(),r._31(0,0,null,null,6,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(l,n,t){var e=!0;if("click"===n){e=!1!==l.component.toggleDelete()&&e}return e},$.b,$.a)),r._30(1,1097728,[[1,4]],0,R.a,[[8,""],C.a,r.t,r.V],null,null),r._47(131072,E.a,[L.a,r.j]),(l()(),r._55(-1,0,["\n                "])),(l()(),r._31(4,0,null,0,1,"ion-icon",[["ios","md-create"],["name","create"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r._30(5,147456,null,0,M.a,[C.a,r.t,r.V],{name:[0,"name"],ios:[1,"ios"]},null),(l()(),r._55(-1,0,["\n            "]))],function(l,n){l(n,5,0,"create","md-create")},function(l,n){l(n,0,0,r._56(n,0,0,r._44(n,2).transform("core.delete")));l(n,4,0,r._44(n,5)._hidden)})}function a(l){return r._57(0,[(l()(),r._31(0,0,null,null,2,"ion-badge",[["item-end",""]],null,null,null,null,null)),r._30(1,16384,null,0,N.a,[C.a,r.t,r.V],null,null),(l()(),r._55(2,null,["",""]))],null,function(l,n){l(n,2,0,n.parent.context.$implicit.badge)})}function u(l){return r._57(0,[(l()(),r._31(0,0,null,null,6,"button",[["clear",""],["color","danger"],["icon-only",""],["ion-button",""],["item-end",""]],[[1,"aria-label",0]],[[null,"click"]],function(l,n,t){var e=!0;if("click"===n){e=!1!==l.component.deleteSite(t,l.parent.context.index)&&e}return e},$.b,$.a)),r._30(1,1097728,[[3,4]],0,R.a,[[8,""],C.a,r.t,r.V],{color:[0,"color"],clear:[1,"clear"]},null),r._47(131072,E.a,[L.a,r.j]),(l()(),r._55(-1,0,["\n                "])),(l()(),r._31(4,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r._30(5,147456,null,0,M.a,[C.a,r.t,r.V],{name:[0,"name"]},null),(l()(),r._55(-1,0,["\n            "]))],function(l,n){l(n,1,0,"danger","");l(n,5,0,"trash")},function(l,n){l(n,0,0,r._56(n,0,0,r._44(n,2).transform("core.delete")));l(n,4,0,r._44(n,5)._hidden)})}function i(l){return r._57(0,[(l()(),r._31(0,0,null,null,31,"a",[["class","item item-block"],["detail-none",""],["ion-item",""]],null,[[null,"click"]],function(l,n,t){var e=!0;if("click"===n){e=!1!==l.component.login(l.context.$implicit.id)&&e}return e},H.b,H.a)),r._30(1,1097728,null,3,T.a,[F.a,C.a,r.t,r.V,[2,A.a]],null,null),r._52(335544320,2,{contentLabel:0}),r._52(603979776,3,{_buttons:1}),r._52(603979776,4,{_icons:1}),r._30(5,16384,null,0,B.a,[],null,null),(l()(),r._55(-1,2,["\n            "])),(l()(),r._31(7,0,null,0,7,"ion-avatar",[["item-start",""]],null,null,null,null,null)),r._30(8,16384,null,0,G.a,[],null,null),(l()(),r._55(-1,null,["\n                "])),(l()(),r._31(10,0,null,null,3,"img",[["core-external-content",""],["onError","this.src='assets/img/user-avatar.png'"],["role","presentation"]],[[8,"alt",0]],null,null,null,null)),r._30(11,4734976,null,0,J.a,[r.t,s.a,K.a,q.a,d.a,f.a,z.a,Q.a,W.a],{siteId:[0,"siteId"],src:[1,"src"]},null),r._48(12,{$a:0}),r._47(131072,E.a,[L.a,r.j]),(l()(),r._55(-1,null,["\n            "])),(l()(),r._55(-1,2,["\n            "])),(l()(),r._31(16,0,null,2,1,"h2",[],null,null,null,null,null)),(l()(),r._55(17,null,["",""])),(l()(),r._55(-1,2,["\n            "])),(l()(),r._31(19,0,null,2,2,"p",[],null,null,null,null,null)),(l()(),r._31(20,0,null,null,1,"core-format-text",[["clean","true"]],null,null,null,null,null)),r._30(21,540672,null,0,X.a,[r.t,d.a,f.a,g.a,L.a,q.a,W.a,z.a,s.a,K.a,Q.a,Y.a,[2,Z.a],[2,ll.a],[2,nl.a],tl.a,el.a],{text:[0,"text"],siteId:[1,"siteId"],clean:[2,"clean"]},null),(l()(),r._55(-1,2,["\n            "])),(l()(),r._31(23,0,null,2,1,"p",[],null,null,null,null,null)),(l()(),r._55(24,null,["",""])),(l()(),r._55(-1,2,["\n            "])),(l()(),r._26(16777216,null,4,1,null,a)),r._30(27,16384,null,0,al.k,[r._11,r._6],{ngIf:[0,"ngIf"]},null),(l()(),r._55(-1,2,["\n            "])),(l()(),r._26(16777216,null,4,1,null,u)),r._30(30,16384,null,0,al.k,[r._11,r._6],{ngIf:[0,"ngIf"]},null),(l()(),r._55(-1,2,["\n        "]))],function(l,n){var t=n.component;l(n,11,0,n.context.$implicit.id,n.context.$implicit.avatar);l(n,21,0,n.context.$implicit.siteName,n.context.$implicit.id,"true");l(n,27,0,!t.showDelete&&n.context.$implicit.badge);l(n,30,0,t.showDelete)},function(l,n){l(n,10,0,r._34(1,"",r._56(n,10,0,r._44(n,13).transform("core.pictureof",l(n,12,0,n.context.$implicit.fullname))),""));l(n,17,0,n.context.$implicit.fullName);l(n,24,0,n.context.$implicit.siteUrl)})}function o(l){return r._57(0,[(l()(),r._31(0,0,null,null,29,"ion-header",[],null,null,null,null,null)),r._30(1,16384,null,0,ul.a,[C.a,r.t,r.V,[2,il.a]],null,null),(l()(),r._55(-1,null,["\n    "])),(l()(),r._31(3,0,null,null,25,"ion-navbar",[["class","toolbar"],["core-back-button",""]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,ol.b,ol.a)),r._30(4,49152,null,0,rl.a,[cl.a,[2,il.a],[2,Z.a],C.a,r.t,r.V],null,null),r._30(5,212992,null,0,_l.a,[rl.a,q.a,L.a,el.a],null,null),(l()(),r._55(-1,3,["\n        "])),(l()(),r._31(7,0,null,3,3,"ion-title",[],null,null,null,sl.b,sl.a)),r._30(8,49152,null,0,dl.a,[C.a,r.t,r.V,[2,fl.a],[2,rl.a]],null,null),(l()(),r._55(9,0,["",""])),r._47(131072,E.a,[L.a,r.j]),(l()(),r._55(-1,3,["\n\n        "])),(l()(),r._31(12,0,null,2,15,"ion-buttons",[["end",""]],null,null,null,null,null)),r._30(13,16384,null,1,gl.a,[C.a,r.t,r.V,[2,fl.a],[2,rl.a]],null,null),r._52(603979776,1,{_buttons:1}),(l()(),r._55(-1,null,["\n            "])),(l()(),r._31(16,0,null,null,7,"button",[["icon-only",""],["ion-button",""]],[[1,"aria-label",0]],[[null,"click"]],function(l,n,t){var e=!0;if("click"===n){e=!1!==r._44(l,18).onClick()&&e}return e},$.b,$.a)),r._30(17,1097728,[[1,4]],0,R.a,[[8,""],C.a,r.t,r.V],null,null),r._30(18,16384,null,0,hl.a,[[2,Z.a]],{navPush:[0,"navPush"]},null),r._47(131072,E.a,[L.a,r.j]),(l()(),r._55(-1,0,["\n                "])),(l()(),r._31(21,0,null,0,1,"ion-icon",[["name","cog"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r._30(22,147456,null,0,M.a,[C.a,r.t,r.V],{name:[0,"name"]},null),(l()(),r._55(-1,0,["\n            "])),(l()(),r._55(-1,null,["\n            "])),(l()(),r._26(16777216,null,null,1,null,e)),r._30(26,16384,null,0,al.k,[r._11,r._6],{ngIf:[0,"ngIf"]},null),(l()(),r._55(-1,null,["\n        "])),(l()(),r._55(-1,3,["\n    "])),(l()(),r._55(-1,null,["\n"])),(l()(),r._55(-1,null,["\n"])),(l()(),r._31(31,0,null,null,24,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,ml.b,ml.a)),r._30(32,4374528,null,0,ll.a,[C.a,q.a,pl.a,r.t,r.V,cl.a,bl.a,r.M,[2,il.a],[2,Z.a]],null,null),(l()(),r._55(-1,1,["\n    "])),(l()(),r._31(34,0,null,1,5,"ion-list",[],null,null,null,null,null)),r._30(35,16384,null,0,vl.a,[C.a,r.t,r.V,q.a,yl.l,pl.a],null,null),(l()(),r._55(-1,null,["\n        "])),(l()(),r._26(16777216,null,null,1,null,i)),r._30(38,802816,null,0,al.j,[r._11,r._6,r.E],{ngForOf:[0,"ngForOf"]},null),(l()(),r._55(-1,null,["\n    "])),(l()(),r._55(-1,1,["\n    "])),(l()(),r._31(41,0,null,0,13,"ion-fab",[["bottom",""],["core-fab",""],["end",""]],null,null,null,xl.b,xl.a)),r._30(42,212992,null,0,Pl.a,[r.t,ll.a],null,null),r._30(43,1228800,null,2,jl.a,[q.a],null,null),r._52(335544320,5,{_mainButton:0}),r._52(603979776,6,{_fabLists:1}),(l()(),r._55(-1,0,["\n        "])),(l()(),r._31(47,0,null,0,6,"button",[["ion-fab",""]],[[1,"aria-label",0]],[[null,"click"]],function(l,n,t){var e=!0;if("click"===n){e=!1!==l.component.add()&&e}return e},kl.b,kl.a)),r._30(48,49152,[[5,4]],0,Vl.a,[C.a,r.t,r.V],null,null),r._47(131072,E.a,[L.a,r.j]),(l()(),r._55(-1,0,["\n            "])),(l()(),r._31(51,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),r._30(52,147456,null,0,M.a,[C.a,r.t,r.V],{name:[0,"name"]},null),(l()(),r._55(-1,0,["\n        "])),(l()(),r._55(-1,0,["\n    "])),(l()(),r._55(-1,1,["\n"])),(l()(),r._55(-1,null,["\n"]))],function(l,n){var t=n.component;l(n,5,0);l(n,18,0,"CoreSettingsListPage");l(n,22,0,"cog");l(n,26,0,t.sites&&t.sites.length>0);l(n,38,0,t.sites),l(n,42,0);l(n,52,0,"add")},function(l,n){l(n,3,0,r._44(n,4)._hidden,r._44(n,4)._sbPadding);l(n,9,0,r._56(n,9,0,r._44(n,10).transform("core.settings.sites")));l(n,16,0,r._56(n,16,0,r._44(n,19).transform("core.mainmenu.appsettings")));l(n,21,0,r._44(n,22)._hidden);l(n,31,0,r._44(n,32).statusbarPadding,r._44(n,32)._hasRefresher);l(n,47,0,r._56(n,47,0,r._44(n,49).transform("core.add")));l(n,51,0,r._44(n,52)._hidden)})}Object.defineProperty(n,"__esModule",{value:!0});var r=t(0),c=t(8),_=t(3),s=t(5),d=t(1),f=t(4),g=t(10),h=t(260),m=t(129),p=this&&this.__decorate||function(l,n,t,e){var a,u=arguments.length,i=u<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,t):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(l,n,t,e);else for(var o=l.length-1;o>=0;o--)(a=l[o])&&(i=(u<3?a(i):u>3?a(n,t,i):a(n,t))||i);return u>3&&i&&Object.defineProperty(n,t,i),i},b=this&&this.__metadata||function(l,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(l,n)},v=function(){function l(l,n,t,e,a,u,i){this.domUtils=l,this.textUtils=n,this.sitesProvider=t,this.loginHelper=e,this.translate=u,this.pushNotificationsProvider=i,this.logger=a.getInstance("CoreLoginSitesPage")}return l.prototype.ionViewDidLoad=function(){var l=this;this.sitesProvider.getSortedSites().then(function(n){l.sites=n.map(function(n){return n.siteUrl=n.siteUrl.replace(/^https?:\/\//,""),n.badge=0,l.pushNotificationsProvider.getSiteCounter(n.id).then(function(l){n.badge=l}),n}),l.showDelete=!1}).catch(function(){})},l.prototype.add=function(){this.loginHelper.goToAddSite(!1,!0)},l.prototype.deleteSite=function(l,n){var t=this;l.stopPropagation();var e=this.sites[n];this.textUtils.formatText(e.siteName).then(function(l){t.domUtils.showConfirm(t.translate.instant("core.login.confirmdeletesite",{sitename:l})).then(function(){t.sitesProvider.deleteSite(e.id).then(function(){t.sites.splice(n,1),t.showDelete=!1,t.sitesProvider.hasSites().then(function(l){l||t.loginHelper.goToAddSite(!0,!0)})}).catch(function(l){t.logger.error("Error deleting site "+e.id,l),t.domUtils.showErrorModalDefault(l,"Delete site failed."),t.domUtils.showErrorModal("core.login.errordeletesite",!0)})}).catch(function(){})})},l.prototype.login=function(l){var n=this,t=this.domUtils.showModalLoading();this.sitesProvider.loadSite(l).then(function(l){if(l)return n.loginHelper.goToSiteInitialPage()}).catch(function(t){n.logger.error("Error loading site "+l,t),n.domUtils.showErrorModalDefault(t,"Error loading site.")}).finally(function(){t.dismiss()})},l.prototype.toggleDelete=function(){this.showDelete=!this.showDelete},l=p([Object(r.m)({selector:"page-core-login-sites",templateUrl:"sites.html"}),b("design:paramtypes",[f.a,g.a,d.a,m.a,s.a,_.c,h.a])],l)}(),y=t(29),x=this&&this.__decorate||function(l,n,t,e){var a,u=arguments.length,i=u<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,t):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(l,n,t,e);else for(var o=l.length-1;o>=0;o--)(a=l[o])&&(i=(u<3?a(i):u>3?a(n,t,i):a(n,t))||i);return u>3&&i&&Object.defineProperty(n,t,i),i},P=function(){function l(){}return l=x([Object(r.I)({declarations:[v],imports:[y.a,c.l.forChild(v),_.b.forChild()]})],l)}(),j=t(1365),k=t(1366),V=t(1367),w=t(1368),D=t(1369),S=t(1370),I=t(1371),U=t(1372),O=t(1373),$=t(46),R=t(43),C=t(6),E=t(27),L=t(18),M=t(45),N=t(147),H=t(30),T=t(20),F=t(19),A=t(28),B=t(33),G=t(179),J=t(232),K=t(16),q=t(14),z=t(26),Q=t(9),W=t(2),X=t(41),Y=t(17),Z=t(22),ll=t(25),nl=t(34),tl=t(36),el=t(12),al=t(7),ul=t(447),il=t(37),ol=t(1374),rl=t(206),cl=t(32),_l=t(676),sl=t(1375),dl=t(350),fl=t(253),gl=t(448),hl=t(231),ml=t(178),pl=t(31),bl=t(104),vl=t(87),yl=t(38),xl=t(300),Pl=t(267),jl=t(215),kl=t(301),Vl=t(187),wl=r._29({encapsulation:2,styles:[],data:{}}),Dl=r._27("page-core-login-sites",v,function(l){return r._57(0,[(l()(),r._31(0,0,null,null,1,"page-core-login-sites",[],null,null,null,o,wl)),r._30(1,49152,null,0,v,[f.a,g.a,d.a,m.a,s.a,L.a,h.a],null,null)],null,null)},{},{},[]),Sl=t(21),Il=t(346),Ul=t(347),Ol=t(349),$l=t(348),Rl=t(446),Cl=t(675),El=t(254);t.d(n,"CoreLoginSitesPageModuleNgFactory",function(){return Ll});var Ll=r._28(P,[],function(l){return r._40([r._41(512,r.o,r._21,[[8,[j.a,k.a,V.a,w.a,D.a,S.a,I.a,U.a,O.a,Dl]],[3,r.o],r.K]),r._41(4608,al.m,al.l,[r.G,[2,al.v]]),r._41(4608,Sl.x,Sl.x,[]),r._41(4608,Sl.d,Sl.d,[]),r._41(4608,Il.b,Il.a,[]),r._41(4608,Ul.a,Ul.b,[]),r._41(4608,Ol.b,Ol.a,[]),r._41(4608,$l.b,$l.a,[]),r._41(4608,L.a,L.a,[Rl.a,Il.b,Ul.a,Ol.b,$l.b,L.b,L.c]),r._41(512,y.a,y.a,[]),r._41(512,al.b,al.b,[]),r._41(512,Sl.v,Sl.v,[]),r._41(512,Sl.i,Sl.i,[]),r._41(512,Sl.s,Sl.s,[]),r._41(512,Cl.a,Cl.a,[]),r._41(512,Cl.b,Cl.b,[]),r._41(512,_.b,_.b,[]),r._41(512,P,P,[]),r._41(256,El.a,v,[]),r._41(256,L.c,void 0,[]),r._41(256,L.b,void 0,[])])})}});